# ==============================================================================
# 根目录 .gitignore - 精确忽略规则 (只忽略日志、venv、编译产物等)
# ==============================================================================
#
# 原则：只忽略真正不需要的文件，保留所有源代码和配置文件
# ✅ 所有源代码目录都会被包含
# ✅ 所有配置文件都会被包含  
# ✅ 所有模板文件都会被包含
# ❌ 只忽略：日志、venv、编译产物、临时文件、大型数据文件
#
# ==============================================================================

# ================================
# 构建输出文件管理 - 新增区域
# ================================
# 构建信息和日志文件需要提交到版本库进行跟踪
# 但排除临时构建文件

# 保留重要的构建记录文件
!.build-info.json
!.build.log
!.sync.log
!build-history/

# 排除临时构建文件
*.build.tmp
*.build.cache
.buildx-cache/
.docker-build-cache/

# ================================
# 数据库文件管理 - 更新规则
# ================================
# 保留构建需要的数据文件，但排除临时数据
!data.sql
*.tmp.sql
*.backup.sql

# ================================
# 日志文件 - 精确控制
# ================================
*.log
*.log.*
**/logs/
**/log/

# 但保留重要的构建和同步日志
!.build.log
!.sync.log
!build-history/*.log

# ================================
# Python虚拟环境 - 确实需要忽略
# ================================
**/venv/
**/env/
**/.venv/
__pycache__/
*.py[cod]
*$py.class
*.so

# ================================
# Node.js依赖 - 确实需要忽略
# ================================
**/node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# ================================
# 编译产物和构建输出 - 确实需要忽略
# ================================
**/target/
**/build/
**/dist/
**/*.class
**/*.jar
**/*.war

# ================================
# IDE和编辑器文件 - 确实需要忽略
# ================================
.idea/
.vscode/
*.swp
*.swo
*~

# ================================
# 操作系统文件 - 确实需要忽略
# ================================
.DS_Store
.DS_Store?
._*
Thumbs.db
.AppleDouble
.LSOverride
.Spotlight-V100
.Trashes
ehthumbs.db

# ================================
# Docker相关临时文件
# ================================
# 保留Docker配置文件，但排除缓存和临时文件
.dockerignore.tmp
docker-compose.override.yml.tmp

# ================================
# Jenkins和CI/CD临时文件
# ================================
jenkins-workspace/
.jenkins/
*.jenkins.tmp

# ================================
# 临时文件和缓存 - 确实需要忽略
# ================================
**/tmp/
**/temp/
**/.cache/
**/cache/*.log
**/cache/*.tmp
**/cache/*.json
*.tmp
*.temp

# ================================
# 敏感信息 - 确实需要忽略
# ================================
.env.local
.env.*.local
secrets/
private_key*
*.pem
*.key
*.crt
*.p12
*.pfx

# 但保留配置模板
!*.example.env
!*.template.env

# ================================
# 大型数据文件 - 有选择的保留
# ================================
*.xlsx
*.xls
*.csv

# 保留重要的JSON配置文件
*.json
!package.json
!config.json
!*config*.json
!*Config*.json
!.build-info.json

# ================================
# 数据库文件 - 确实需要忽略
# ================================
*.db
*.sqlite
*.sqlite3
*.db3

# ================================
# 备份和性能测试文件
# ================================
*.backup
*.bak
*.orig
performance_*.json
performance_*.log
*_report.json
*_report.html
*.jtl
performance-test/**/*.jtl
performance-test/results/*.jtl

# ================================
# 媒体和压缩文件 - 确实需要忽略
# ================================
*.mp4
*.avi
*.mov
*.wmv
*.mp3
*.wav
*.flac
*.zip
*.tar.gz
*.rar
*.7z

# ================================
# 网络和其他文件
# ================================
.nfs*