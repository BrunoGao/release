# LJWX本地构建版本控制配置 v1.2.6
# 更新时间: 2025-06-26

# 核心应用版本
LJWX_VERSION=2.0.3
LJWX_MYSQL_VERSION=2.0.3
LJWX_REDIS_VERSION=2.0.3
LJWX_BOOT_VERSION=2.0.3
LJWX_BIGSCREEN_VERSION=2.0.3
LJWX_ADMIN_VERSION=2.0.3

# 定制化监控组件版本
LJWX_GRAFANA_VERSION=1.2.6
LJWX_PROMETHEUS_VERSION=1.2.6
LJWX_LOKI_VERSION=1.2.6
LJWX_PROMTAIL_VERSION=1.2.6
LJWX_ALERTMANAGER_VERSION=1.2.6

# 本地构建配置  
REGISTRY=crpi-yilnm6upy4pmbp67.cn-shenzhen.personal.cr.aliyuncs.com/ljwx  # 阿里云镜像仓库(推送目标)
PULL_REGISTRY=syxpn3chjq4bgj.xuanyuan.run  # 轩辕镜像服务(拉取基础镜像)
PLATFORMS=linux/amd64  # 本地构建单架构

# 构建模式配置
LOCAL_BUILD=true  # 本地构建模式（避免多架构manifest导出问题）
PUSH_TO_REGISTRY=false  # 推送到阿里云仓库

# 构建配置
BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ')
GIT_COMMIT=$(git rev-parse --short HEAD 2>/dev/null || echo "unknown")

# 基础镜像版本
BASE_GRAFANA_VERSION=9.5.0
BASE_PROMETHEUS_VERSION=v2.40.0
BASE_LOKI_VERSION=2.9.0
BASE_PROMTAIL_VERSION=2.9.0
BASE_ALERTMANAGER_VERSION=latest

# 功能特性标记
FEATURES_ENABLED="grafana-dashboard,prometheus-config,loki-logs,promtail-collect,alertmanager-rules"
MONITORING_TIER="enterprise"

# 本地构建优化
DOCKER_BUILDKIT=1  # 启用BuildKit加速构建
COMPOSE_DOCKER_CLI_BUILD=1  # 启用Docker Compose BuildKit支持 
