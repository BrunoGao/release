# çµå¢ƒä¸‡è±¡å‘Šè­¦ç³»ç»Ÿç»¼åˆä¼˜åŒ–å®æ–½æ–¹æ¡ˆ

## ğŸ“‹ æ–¹æ¡ˆæ¦‚è¿°

åŸºäºå¯¹ç°æœ‰æ–‡æ¡£ã€ljwx-bootåç«¯ä»£ç å’Œljwx-bigscreenå‰ç«¯ä»£ç çš„æ·±åº¦åˆ†æï¼Œæœ¬æ–¹æ¡ˆæ•´åˆäº†å‘Šè­¦è§„åˆ™ä¼˜åŒ–ã€ç¼“å­˜åŒæ­¥ã€æ¶ˆæ¯æœºåˆ¶ç»Ÿä¸€ç­‰å¤šä¸ªç»´åº¦çš„æ”¹è¿›ç­–ç•¥ï¼Œæä¾›ä¸€ä¸ªå¯ç›´æ¥è½åœ°æ‰§è¡Œçš„ç»¼åˆä¼˜åŒ–æ–¹æ¡ˆã€‚

### ğŸ¯ æ ¸å¿ƒä¼˜åŒ–ç›®æ ‡

- **ç»Ÿä¸€å‘Šè­¦æ¶æ„**: æ„å»ºä»watchâ†’bootâ†’bigscreençš„ç»Ÿä¸€å‘Šè­¦å¤„ç†é“¾è·¯
- **æ™ºèƒ½å‘Šè­¦å¼•æ“**: åŸºäºAIç®—æ³•é™ä½è¯¯æŠ¥ç‡ï¼Œæå‡å‘Šè­¦å‡†ç¡®æ€§
- **é«˜æ€§èƒ½åˆ†å‘**: å®ç°æ¯«ç§’çº§å‘Šè­¦åˆ†å‘ï¼Œæ”¯æŒä¸‡çº§å¹¶å‘å¤„ç†
- **é—­ç¯ç®¡ç†**: ä»å‘Šè­¦ç”Ÿæˆåˆ°å¤„ç†ç¡®è®¤çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†

---

## ğŸ” ç°çŠ¶åˆ†ææ€»ç»“

### 1. ç°æœ‰æ¶æ„ä¼˜åŠ¿
- âœ… **å®Œæ•´çš„è¡¨ç»“æ„**: TAlertInfoã€TAlertRulesã€TAlertActionLogç­‰æ ¸å¿ƒè¡¨ç»“æ„å®Œå–„
- âœ… **ç»Ÿä¸€æ¶ˆæ¯å‘å¸ƒå™¨**: UnifiedMessagePublisherå·²å®ç°å¤šæ¸ é“æ¶ˆæ¯åˆ†å‘
- âœ… **Redisç¼“å­˜æ¶æ„**: AlertRulesCacheManageræ”¯æŒè·¨DB Redisé€šä¿¡
- âœ… **ç»„ç»‡æ¶æ„ä¼˜åŒ–**: å·²å®æ–½é—­åŒ…è¡¨ä¼˜åŒ–ï¼ŒæŸ¥è¯¢æ€§èƒ½æå‡100å€
- âœ… **å¤šç«¯ååŒ**: ljwx-bootã€ljwx-bigscreenã€ljwx-adminå½¢æˆå®Œæ•´ç”Ÿæ€

### 2. ä¸»è¦é—®é¢˜è¯†åˆ«
- âŒ **ç¼ºä¹ä¼˜å…ˆçº§ç®¡ç†**: TAlertInfoè¡¨ç¼ºå°‘priorityå­—æ®µï¼Œæ— æ³•ç²¾ç¡®æ’åº
- âŒ **è§„åˆ™å¼•æ“ç®€å•**: åŸºäºç®€å•é˜ˆå€¼åˆ¤æ–­ï¼Œç¼ºä¹AIæ™ºèƒ½åˆ†æ
- âŒ **æ¶ˆæ¯å»é‡ä¸è¶³**: å¯èƒ½äº§ç”Ÿé‡å¤å‘Šè­¦ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ
- âŒ **ç›‘æ§é¢„è­¦ç¼ºå¤±**: ç¼ºä¹å‘Šè­¦ç³»ç»Ÿè‡ªèº«çš„ç›‘æ§å’Œé¢„è­¦æœºåˆ¶
- âŒ **ç¼ºä¹è‡ªåŠ¨å¤„ç†**: upload_common_eventå’Œupload_health_dataäº§ç”Ÿçš„å‘Šè­¦éœ€è¦å¤§é‡äººå·¥å®¡æ ¸

---

## ğŸš€ ç»¼åˆä¼˜åŒ–æ–¹æ¡ˆ

### é˜¶æ®µä¸€ï¼šæ•°æ®åº“æ¶æ„å‡çº§ (2-3å¤©)

#### 1.1 å‘Šè­¦ä¿¡æ¯è¡¨å¢å¼º
```sql
-- t_alert_infoè¡¨ç»“æ„ä¼˜åŒ–
ALTER TABLE t_alert_info
ADD COLUMN priority TINYINT DEFAULT 5 COMMENT 'ä¼˜å…ˆçº§(1-10, 1æœ€é«˜)',
ADD COLUMN due_time DATETIME COMMENT 'å¤„ç†æˆªæ­¢æ—¶é—´',
ADD COLUMN escalation_level TINYINT DEFAULT 0 COMMENT 'å‡çº§çº§åˆ«(0-3)',
ADD COLUMN auto_close_time DATETIME COMMENT 'è‡ªåŠ¨å…³é—­æ—¶é—´',
ADD COLUMN trigger_conditions JSON COMMENT 'è§¦å‘æ¡ä»¶è¯¦æƒ…',
ADD COLUMN evaluation_context JSON COMMENT 'è¯„ä¼°ä¸Šä¸‹æ–‡',
ADD COLUMN suppression_key VARCHAR(128) COMMENT 'æŠ‘åˆ¶é”®',
ADD COLUMN ack_required BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦éœ€è¦ç¡®è®¤',
ADD COLUMN auto_resolve BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦è‡ªåŠ¨æ¢å¤',
ADD COLUMN auto_processed BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦è‡ªåŠ¨å¤„ç†',
ADD COLUMN auto_process_rule_id BIGINT COMMENT 'è‡ªåŠ¨å¤„ç†è§„åˆ™ID',
ADD COLUMN auto_process_time DATETIME COMMENT 'è‡ªåŠ¨å¤„ç†æ—¶é—´',
ADD COLUMN auto_process_reason VARCHAR(500) COMMENT 'è‡ªåŠ¨å¤„ç†åŸå› ',
ADD COLUMN processing_stage ENUM('PENDING', 'EVALUATING', 'AUTO_PROCESSING', 'MANUAL_REVIEW', 'RESOLVED', 'CLOSED') DEFAULT 'PENDING' COMMENT 'å¤„ç†é˜¶æ®µ';

-- æ€§èƒ½ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_alert_priority_processing ON t_alert_info(customer_id, priority, alert_status, due_time);
CREATE INDEX idx_alert_escalation ON t_alert_info(customer_id, escalation_level, alert_timestamp);
CREATE INDEX idx_suppression ON t_alert_info(suppression_key);
CREATE INDEX idx_auto_processing ON t_alert_info(customer_id, processing_stage, auto_processed);
CREATE INDEX idx_auto_process_time ON t_alert_info(auto_process_time);
```

#### 1.2 å‘Šè­¦è§„åˆ™è¡¨å®Œå–„
```sql
-- t_alert_rulesè¡¨æ–°å¢å­—æ®µ(åŸºäºç°æœ‰ä»£ç åˆ†æ)
-- åŸºäºç°æœ‰t_alert_rulesè¡¨å¢åŠ è‡ªåŠ¨å¤„ç†å­—æ®µ
ALTER TABLE t_alert_rules 
ADD COLUMN auto_process_enabled BOOLEAN DEFAULT FALSE COMMENT 'å¯ç”¨è‡ªåŠ¨å¤„ç†',
ADD COLUMN auto_process_action ENUM('AUTO_RESOLVE', 'AUTO_ACKNOWLEDGE', 'AUTO_ESCALATE', 'AUTO_SUPPRESS') COMMENT 'è‡ªåŠ¨å¤„ç†åŠ¨ä½œ',
ADD COLUMN auto_process_delay_seconds INT DEFAULT 0 COMMENT 'è‡ªåŠ¨å¤„ç†å»¶è¿Ÿç§’æ•°',
ADD COLUMN auto_resolve_threshold_count INT DEFAULT 1 COMMENT 'è‡ªåŠ¨æ¢å¤é˜ˆå€¼æ¬¡æ•°',
ADD COLUMN suppress_duration_minutes INT DEFAULT 60 COMMENT 'æŠ‘åˆ¶æŒç»­æ—¶é—´(åˆ†é’Ÿ)';
```

### é˜¶æ®µäºŒï¼šåŸºäºè§„åˆ™çš„è‡ªåŠ¨å‘Šè­¦å¤„ç†å®ç° (3-4å¤©)

#### 2.1 å¢å¼ºUnifiedMessagePublisher
åŸºäºç°æœ‰å‘Šè­¦è§„åˆ™å®ç°è‡ªåŠ¨å¤„ç†ï¼š

```java
// åœ¨ljwx-boot/ljwx-boot-modules/src/main/java/com/ljwx/modules/health/service/UnifiedMessagePublisher.java
// æ–°å¢è‡ªåŠ¨å¤„ç†æ–¹æ³•

/**
 * å¸¦è‡ªåŠ¨å¤„ç†çš„å‘Šè­¦å‘å¸ƒå…¥å£
 */
public CompletableFuture<PublishResult> publishAlertWithAutoProcess(AlertMessage alertMessage) {
    return CompletableFuture.supplyAsync(() -> {
        try {
            // 1. æŸ¥è¯¢å‘Šè­¦è§„åˆ™
            TAlertRules alertRule = alertRuleService.getById(alertMessage.getRuleId());
            if (alertRule == null) {
                return PublishResult.failed("å‘Šè­¦è§„åˆ™ä¸å­˜åœ¨");
            }
            
            // 2. ä¿å­˜å‘Šè­¦åˆ°æ•°æ®åº“
            TAlertInfo alertInfo = saveAlertInfo(alertMessage, alertRule);
            
            // 3. æ£€æŸ¥æ˜¯å¦å¯ç”¨è‡ªåŠ¨å¤„ç†
            if (alertRule.getAutoProcessEnabled() && alertRule.getAutoProcessAction() != null) {
                return processAutoAlert(alertInfo, alertRule, alertMessage);
            }
            
            // 4. å¸¸è§„å‘Šè­¦å¤„ç†æµç¨‹
            return publishAlertSync(alertMessage);
            
        } catch (Exception e) {
            log.error("å‘Šè­¦è‡ªåŠ¨å¤„ç†å¤±è´¥", e);
            return PublishResult.failed("è‡ªåŠ¨å¤„ç†å¤±è´¥: " + e.getMessage());
        }
    }, messageExecutorPool);
}

/**
 * è‡ªåŠ¨å¤„ç†å‘Šè­¦
 */
private PublishResult processAutoAlert(TAlertInfo alertInfo, TAlertRules rule, AlertMessage alertMessage) {
    try {
        String autoAction = rule.getAutoProcessAction();
        int delaySeconds = rule.getAutoProcessDelaySeconds() != null ? rule.getAutoProcessDelaySeconds() : 0;
        
        // å»¶è¿Ÿå¤„ç†
        if (delaySeconds > 0) {
            scheduleDelayedAutoProcess(alertInfo.getId(), autoAction, delaySeconds);
            updateAlertProcessingStage(alertInfo.getId(), "AUTO_PROCESSING");
            return PublishResult.success("å‘Šè­¦å·²å®‰æ’è‡ªåŠ¨å¤„ç†");
        }
        
        // ç«‹å³å¤„ç†
        return executeAutoProcessAction(alertInfo, rule, autoAction);
        
    } catch (Exception e) {
        log.error("æ‰§è¡Œè‡ªåŠ¨å¤„ç†å¤±è´¥: alertId={}", alertInfo.getId(), e);
        return PublishResult.failed("è‡ªåŠ¨å¤„ç†æ‰§è¡Œå¤±è´¥: " + e.getMessage());
    }
}

/**
 * æ‰§è¡Œè‡ªåŠ¨å¤„ç†åŠ¨ä½œ
 */
private PublishResult executeAutoProcessAction(TAlertInfo alertInfo, TAlertRules rule, String action) {
    try {
        switch (action) {
            case "AUTO_RESOLVE":
                return handleAutoResolve(alertInfo, rule);
            case "AUTO_ACKNOWLEDGE":
                return handleAutoAcknowledge(alertInfo, rule);
            case "AUTO_ESCALATE":
                return handleAutoEscalate(alertInfo, rule);
            case "AUTO_SUPPRESS":
                return handleAutoSuppress(alertInfo, rule);
            default:
                return PublishResult.failed("æœªçŸ¥çš„è‡ªåŠ¨å¤„ç†åŠ¨ä½œ: " + action);
        }
    } catch (Exception e) {
        log.error("æ‰§è¡Œè‡ªåŠ¨å¤„ç†åŠ¨ä½œå¤±è´¥: action={}, alertId={}", action, alertInfo.getId(), e);
        return PublishResult.failed("åŠ¨ä½œæ‰§è¡Œå¤±è´¥: " + e.getMessage());
    }
}

/**
 * è‡ªåŠ¨è§£å†³å‘Šè­¦
 */
private PublishResult handleAutoResolve(TAlertInfo alertInfo, TAlertRules rule) {
    // æ£€æŸ¥æ˜¯å¦æ»¡è¶³è‡ªåŠ¨è§£å†³æ¡ä»¶
    if (!canAutoResolve(alertInfo, rule)) {
        return continueNormalProcess(alertInfo);
    }
    
    // æ›´æ–°å‘Šè­¦çŠ¶æ€
    alertService.updateAlertStatus(alertInfo.getId(), "RESOLVED", "ç³»ç»Ÿè‡ªåŠ¨è§£å†³", LocalDateTime.now());
    
    // è®°å½•è‡ªåŠ¨å¤„ç†æ—¥å¿—
    logAutoProcessAction(alertInfo.getId(), "AUTO_RESOLVE", "åŸºäºè§„åˆ™è‡ªåŠ¨è§£å†³å‘Šè­¦", rule.getId());
    
    // å‘é€è‡ªåŠ¨è§£å†³é€šçŸ¥(ä½ä¼˜å…ˆçº§)
    sendAutoProcessNotification(alertInfo, "AUTO_RESOLVED");
    
    log.info("å‘Šè­¦å·²è‡ªåŠ¨è§£å†³: alertId={}, ruleId={}", alertInfo.getId(), rule.getId());
    return PublishResult.success("å‘Šè­¦å·²è‡ªåŠ¨è§£å†³");
}

/**
 * è‡ªåŠ¨ç¡®è®¤å‘Šè­¦
 */
private PublishResult handleAutoAcknowledge(TAlertInfo alertInfo, TAlertRules rule) {
    // æ›´æ–°å‘Šè­¦çŠ¶æ€ä¸ºå·²ç¡®è®¤
    alertService.updateAlertStatus(alertInfo.getId(), "ACKNOWLEDGED", "ç³»ç»Ÿè‡ªåŠ¨ç¡®è®¤", LocalDateTime.now());
    
    // è®°å½•å¤„ç†æ—¥å¿—
    logAutoProcessAction(alertInfo.getId(), "AUTO_ACKNOWLEDGE", "ç³»ç»Ÿè‡ªåŠ¨ç¡®è®¤å‘Šè­¦", rule.getId());
    
    // å‘é€ä½ä¼˜å…ˆçº§é€šçŸ¥
    sendAutoProcessNotification(alertInfo, "AUTO_ACKNOWLEDGED");
    
    log.info("å‘Šè­¦å·²è‡ªåŠ¨ç¡®è®¤: alertId={}, ruleId={}", alertInfo.getId(), rule.getId());
    return PublishResult.success("å‘Šè­¦å·²è‡ªåŠ¨ç¡®è®¤");
}

/**
 * è‡ªåŠ¨æŠ‘åˆ¶å‘Šè­¦
 */
private PublishResult handleAutoSuppress(TAlertInfo alertInfo, TAlertRules rule) {
    int suppressDuration = rule.getSuppressDurationMinutes() != null ? rule.getSuppressDurationMinutes() : 60;
    LocalDateTime suppressUntil = LocalDateTime.now().plusMinutes(suppressDuration);
    
    // è®¾ç½®æŠ‘åˆ¶çŠ¶æ€
    alertService.updateAlertStatus(alertInfo.getId(), "SUPPRESSED", 
        "ç³»ç»Ÿè‡ªåŠ¨æŠ‘åˆ¶" + suppressDuration + "åˆ†é’Ÿ", suppressUntil);
    
    // è®°å½•å¤„ç†æ—¥å¿—
    logAutoProcessAction(alertInfo.getId(), "AUTO_SUPPRESS", 
        "è‡ªåŠ¨æŠ‘åˆ¶å‘Šè­¦" + suppressDuration + "åˆ†é’Ÿ", rule.getId());
    
    // å®‰æ’æŠ‘åˆ¶åˆ°æœŸåçš„å¤„ç†
    scheduleSuppressionExpiry(alertInfo.getId(), suppressUntil);
    
    log.info("å‘Šè­¦å·²è‡ªåŠ¨æŠ‘åˆ¶: alertId={}, duration={}min", alertInfo.getId(), suppressDuration);
    return PublishResult.success("å‘Šè­¦å·²è‡ªåŠ¨æŠ‘åˆ¶");
}

/**
 * è‡ªåŠ¨å‡çº§å‘Šè­¦
 */
private PublishResult handleAutoEscalate(TAlertInfo alertInfo, TAlertRules rule) {
    // æå‡å‘Šè­¦ä¼˜å…ˆçº§
    int newPriority = Math.max(1, alertInfo.getPriority() - 2); // ä¼˜å…ˆçº§æ•°å­—è¶Šå°è¶Šé«˜
    
    // æ›´æ–°å‘Šè­¦ä¿¡æ¯
    alertService.updateAlertPriority(alertInfo.getId(), newPriority, "ç³»ç»Ÿè‡ªåŠ¨å‡çº§");
    
    // è®°å½•å¤„ç†æ—¥å¿—
    logAutoProcessAction(alertInfo.getId(), "AUTO_ESCALATE", "è‡ªåŠ¨å‡çº§å‘Šè­¦ä¼˜å…ˆçº§", rule.getId());
    
    // å‘é€é«˜ä¼˜å…ˆçº§é€šçŸ¥
    AlertMessage escalatedMessage = buildEscalatedAlertMessage(alertInfo, newPriority);
    publishAlertSync(escalatedMessage);
    
    log.info("å‘Šè­¦å·²è‡ªåŠ¨å‡çº§: alertId={}, newPriority={}", alertInfo.getId(), newPriority);
    return PublishResult.success("å‘Šè­¦å·²è‡ªåŠ¨å‡çº§");
}

/**
 * åˆ¤æ–­æ˜¯å¦å¯ä»¥è‡ªåŠ¨è§£å†³
 */
private boolean canAutoResolve(TAlertInfo alertInfo, TAlertRules rule) {
    // æ£€æŸ¥å‘Šè­¦ç±»å‹æ˜¯å¦å…è®¸è‡ªåŠ¨è§£å†³
    String alertType = alertInfo.getAlertType();
    List<String> autoResolvableTypes = Arrays.asList(
        "heart_rate_abnormal", "blood_oxygen_low", "temperature_abnormal",
        "device_offline", "battery_low"
    );
    
    if (!autoResolvableTypes.contains(alertType)) {
        return false;
    }
    
    // æ£€æŸ¥å‘Šè­¦ä¸¥é‡ç¨‹åº¦(criticalçº§åˆ«ä¸è‡ªåŠ¨è§£å†³)
    if ("critical".equalsIgnoreCase(alertInfo.getSeverityLevel())) {
        return false;
    }
    
    // æ£€æŸ¥æ˜¯å¦åœ¨æŒ‡å®šæ—¶é—´çª—å£å†…
    if (rule.getTimeWindowSeconds() != null) {
        LocalDateTime windowStart = alertInfo.getAlertTimestamp().minusSeconds(rule.getTimeWindowSeconds());
        if (LocalDateTime.now().isBefore(windowStart)) {
            return false;
        }
    }
    
    // æ£€æŸ¥æœ€è¿‘æ˜¯å¦æœ‰ç±»ä¼¼å‘Šè­¦è‡ªåŠ¨è§£å†³
    int thresholdCount = rule.getAutoResolveThresholdCount() != null ? rule.getAutoResolveThresholdCount() : 1;
    long recentAutoResolveCount = alertService.countRecentAutoResolvedAlerts(
        alertInfo.getDeviceSn(), alertType, Duration.ofHours(24));
    
    return recentAutoResolveCount < thresholdCount;
}

/**
 * ç»§ç»­æ­£å¸¸å¤„ç†æµç¨‹
 */
private PublishResult continueNormalProcess(TAlertInfo alertInfo) {
    // æ›´æ–°å¤„ç†é˜¶æ®µä¸ºäººå·¥å®¡æ ¸
    updateAlertProcessingStage(alertInfo.getId(), "MANUAL_REVIEW");
    
    // æ„å»ºå‘Šè­¦æ¶ˆæ¯è¿›è¡Œæ­£å¸¸å‘å¸ƒ
    AlertMessage normalMessage = buildAlertMessageFromInfo(alertInfo);
    return publishAlertSync(normalMessage);
}

/**
 * è®°å½•è‡ªåŠ¨å¤„ç†æ—¥å¿—
 */
private void logAutoProcessAction(Long alertId, String action, String reason, Long ruleId) {
    try {
        TAlertActionLog actionLog = TAlertActionLog.builder()
            .alertId(alertId)
            .actionType(action)
            .actionResult("SUCCESS")
            .actionReason(reason)
            .processedBy("SYSTEM")
            .ruleId(ruleId)
            .processedTime(LocalDateTime.now())
            .build();
        
        alertActionLogService.save(actionLog);
        
    } catch (Exception e) {
        log.error("è®°å½•è‡ªåŠ¨å¤„ç†æ—¥å¿—å¤±è´¥: alertId={}, action={}", alertId, action, e);
    }
}

/**
 * æ›´æ–°å‘Šè­¦å¤„ç†é˜¶æ®µ
 */
private void updateAlertProcessingStage(Long alertId, String stage) {
    try {
        alertService.updateProcessingStage(alertId, stage, LocalDateTime.now());
    } catch (Exception e) {
        log.error("æ›´æ–°å‘Šè­¦å¤„ç†é˜¶æ®µå¤±è´¥: alertId={}, stage={}", alertId, stage, e);
    }
}

/**
 * æ™ºèƒ½ä¼˜å…ˆçº§è®¡ç®—
 */
private AlertPriorityResult calculateSmartPriority(AlertMessage alertMessage) {
    AlertPriorityCalculator calculator = new AlertPriorityCalculator();
    
    // åŸºç¡€ä¼˜å…ˆçº§
    int basePriority = getBasePriority(alertMessage.getSeverityLevel());
    
    // æ—¶é—´å› å­è°ƒæ•´
    int timeAdjustment = calculateTimeFactor(alertMessage);
    
    // ç”¨æˆ·é£é™©å› å­
    int userRiskAdjustment = calculateUserRiskFactor(alertMessage.getUserId());
    
    // è®¾å¤‡å†å²å› å­
    int deviceHistoryAdjustment = calculateDeviceHistoryFactor(alertMessage.getDeviceSn());
    
    // åœ°ç†ä½ç½®å› å­
    int locationAdjustment = calculateLocationFactor(alertMessage);
    
    int finalPriority = Math.max(1, Math.min(10, 
        basePriority + timeAdjustment + userRiskAdjustment + 
        deviceHistoryAdjustment + locationAdjustment));
    
    LocalDateTime dueTime = calculateDueTime(finalPriority, alertMessage.getAlertType());
    
    return AlertPriorityResult.builder()
        .priority(finalPriority)
        .dueTime(dueTime)
        .calculations(Map.of(
            "base", basePriority,
            "time", timeAdjustment,
            "userRisk", userRiskAdjustment,
            "deviceHistory", deviceHistoryAdjustment,
            "location", locationAdjustment
        ))
        .build();
}

/**
 * ä¸ªäººåŸºçº¿åˆ†æ
 */
private BaselineAnalysisResult analyzeBaseline(AlertMessage alertMessage) {
    // è·å–ç”¨æˆ·å†å²å¥åº·æ•°æ®
    List<HealthDataPoint> historicalData = getHistoricalHealthData(
        alertMessage.getUserId(), alertMessage.getPhysicalSign(), 30); // 30å¤©å†å²
    
    if (historicalData.size() < 7) {
        return BaselineAnalysisResult.insufficient();
    }
    
    // è®¡ç®—ä¸ªäººåŸºçº¿
    PersonalBaseline baseline = calculatePersonalBaseline(historicalData);
    
    // å½“å‰å€¼ä¸åŸºçº¿å¯¹æ¯”
    double currentValue = Double.parseDouble(alertMessage.getCurrentValue().toString());
    double deviation = Math.abs(currentValue - baseline.getMean());
    double threshold = baseline.getStdDev() * 2.5; // 2.5ä¸ªæ ‡å‡†å·®
    
    boolean isFalsePositive = deviation <= threshold;
    double confidence = 1.0 - (deviation / threshold);
    
    return BaselineAnalysisResult.builder()
        .isFalsePositive(isFalsePositive)
        .confidence(Math.max(0, Math.min(1, confidence)))
        .baseline(baseline)
        .currentValue(currentValue)
        .deviation(deviation)
        .build();
}

/**
 * æ¨¡å¼è¯†åˆ«åˆ†æ
 */
private PatternAnalysisResult analyzePatterns(AlertMessage alertMessage) {
    // è·å–è®¾å¤‡æœ€è¿‘å‘Šè­¦å†å²
    List<AlertInfo> recentAlerts = getRecentAlerts(alertMessage.getDeviceSn(), 24);
    
    // æ£€æŸ¥å·²çŸ¥è¯¯æŠ¥æ¨¡å¼
    if (isDeviceStartupPattern(alertMessage, recentAlerts)) {
        return PatternAnalysisResult.lowConfidence("è®¾å¤‡å¯åŠ¨è¯¯æŠ¥æ¨¡å¼");
    }
    
    if (isEnvironmentalInterference(alertMessage, recentAlerts)) {
        return PatternAnalysisResult.lowConfidence("ç¯å¢ƒå¹²æ‰°æ¨¡å¼");
    }
    
    if (isExerciseFalsePositive(alertMessage)) {
        return PatternAnalysisResult.lowConfidence("è¿åŠ¨çŠ¶æ€è¯¯æŠ¥");
    }
    
    // é¢‘ç¹å‘Šè­¦æ£€æµ‹
    long alertCount = recentAlerts.stream()
        .filter(a -> a.getAlertType().equals(alertMessage.getAlertType()))
        .count();
    
    if (alertCount > 10) {
        return PatternAnalysisResult.lowConfidence("é¢‘ç¹å‘Šè­¦ï¼Œå¯èƒ½è¯¯æŠ¥");
    }
    
    return PatternAnalysisResult.highConfidence("æ­£å¸¸å‘Šè­¦æ¨¡å¼");
}
```

#### 2.2 ljwx-bigscreené›†æˆè‡ªåŠ¨å¤„ç†
åŸºäºç°æœ‰alert.pyä»£ç ï¼Œé›†æˆè‡ªåŠ¨å¤„ç†é€»è¾‘ï¼š

```python
# åœ¨ljwx-bigscreen/bigscreen/bigScreen/alert.pyä¸­æ–°å¢è‡ªåŠ¨å¤„ç†æ–¹æ³•

def generate_alert_with_auto_process(health_data, rule, user_info=None, device_info=None):
    """
    åŸºäºè§„åˆ™çš„è‡ªåŠ¨å‘Šè­¦ç”Ÿæˆå’Œå¤„ç†
    
    Args:
        health_data: å¥åº·æ•°æ® (æ¥è‡ªupload_health_data)
        rule: å‘Šè­¦è§„åˆ™ (TAlertRules)
        user_info: ç”¨æˆ·ä¿¡æ¯
        device_info: è®¾å¤‡ä¿¡æ¯
    
    Returns:
        dict: åŒ…å«å‘Šè­¦ä¿¡æ¯å’Œè‡ªåŠ¨å¤„ç†ç»“æœ
    """
    try:
        # 1. åŸºç¡€å‘Šè­¦åˆ¤æ–­
        basic_alert = evaluate_basic_threshold(health_data, rule)
        if not basic_alert['triggered']:
            return {'alert_generated': False, 'reason': 'threshold_not_exceeded'}
        
        # 2. æ£€æŸ¥å‘Šè­¦æŠ‘åˆ¶
        if is_alert_suppressed(health_data, rule, device_info):
            return {'alert_generated': False, 'reason': 'alert_suppressed'}
        
        # 3. ç”Ÿæˆå‘Šè­¦ä¿¡æ¯
        alert_info = create_alert_info(health_data, rule, user_info, device_info, basic_alert)
        
        # 4. ä¿å­˜åˆ°æ•°æ®åº“
        alert_id = save_alert_to_database(alert_info)
        alert_info['id'] = alert_id
        
        # 5. æ£€æŸ¥æ˜¯å¦å¯ç”¨è‡ªåŠ¨å¤„ç†
        if rule.get('auto_process_enabled') and rule.get('auto_process_action'):
            auto_result = handle_auto_processing(alert_info, rule)
            
            # 6. æ ¹æ®è‡ªåŠ¨å¤„ç†ç»“æœå†³å®šæ˜¯å¦å‘é€åˆ°bootç³»ç»Ÿ
            if auto_result['auto_processed']:
                # å·²è‡ªåŠ¨å¤„ç†ï¼Œåªå‘é€ä½ä¼˜å…ˆçº§é€šçŸ¥
                send_auto_process_notification(alert_info, auto_result)
                
                return {
                    'alert_generated': True,
                    'alert_id': alert_id,
                    'auto_processed': True,
                    'auto_result': auto_result,
                    'alert_info': alert_info
                }
            else:
                # éœ€è¦äººå·¥å¤„ç†ï¼Œå‘é€åˆ°bootç³»ç»Ÿ
                publish_to_boot_system(alert_info, alert_id)
                
                return {
                    'alert_generated': True,
                    'alert_id': alert_id,
                    'auto_processed': False,
                    'alert_info': alert_info
                }
        else:
            # æœªå¯ç”¨è‡ªåŠ¨å¤„ç†ï¼Œæ­£å¸¸æµç¨‹
            publish_to_boot_system(alert_info, alert_id)
            
            return {
                'alert_generated': True,
                'alert_id': alert_id,
                'auto_processed': False,
                'alert_info': alert_info
            }
        
    except Exception as e:
        logger.error(f"å‘Šè­¦ç”Ÿæˆå¤±è´¥: {e}")
        return {'alert_generated': False, 'reason': 'generation_error', 'error': str(e)}

def handle_auto_processing(alert_info, rule):
    """
    å¤„ç†è‡ªåŠ¨å‘Šè­¦å¤„ç†é€»è¾‘
    
    Args:
        alert_info: å‘Šè­¦ä¿¡æ¯
        rule: å‘Šè­¦è§„åˆ™
    
    Returns:
        dict: è‡ªåŠ¨å¤„ç†ç»“æœ
    """
    try:
        auto_action = rule.get('auto_process_action')
        delay_seconds = rule.get('auto_process_delay_seconds', 0)
        
        if delay_seconds > 0:
            # å®‰æ’å»¶è¿Ÿå¤„ç†
            schedule_auto_process(alert_info['id'], auto_action, delay_seconds)
            update_alert_processing_stage(alert_info['id'], 'AUTO_PROCESSING')
            
            return {
                'auto_processed': False,
                'action': auto_action,
                'scheduled': True,
                'delay_seconds': delay_seconds,
                'message': f'å·²å®‰æ’{delay_seconds}ç§’åè‡ªåŠ¨{auto_action}'
            }
        
        # ç«‹å³å¤„ç†
        return execute_auto_process_action(alert_info, rule, auto_action)
        
    except Exception as e:
        logger.error(f"è‡ªåŠ¨å¤„ç†å¤±è´¥: {e}")
        return {
            'auto_processed': False,
            'error': str(e),
            'message': 'è‡ªåŠ¨å¤„ç†å¤±è´¥ï¼Œè½¬ä¸ºäººå·¥å¤„ç†'
        }

def execute_auto_process_action(alert_info, rule, action):
    """
    æ‰§è¡Œè‡ªåŠ¨å¤„ç†åŠ¨ä½œ
    """
    try:
        if action == 'AUTO_RESOLVE':
            return handle_auto_resolve(alert_info, rule)
        elif action == 'AUTO_ACKNOWLEDGE':
            return handle_auto_acknowledge(alert_info, rule)
        elif action == 'AUTO_SUPPRESS':
            return handle_auto_suppress(alert_info, rule)
        elif action == 'AUTO_ESCALATE':
            return handle_auto_escalate(alert_info, rule)
        else:
            return {
                'auto_processed': False,
                'error': f'æœªçŸ¥çš„è‡ªåŠ¨å¤„ç†åŠ¨ä½œ: {action}',
                'message': 'è½¬ä¸ºäººå·¥å¤„ç†'
            }
            
    except Exception as e:
        logger.error(f"æ‰§è¡Œè‡ªåŠ¨å¤„ç†åŠ¨ä½œå¤±è´¥: {action}, {e}")
        return {
            'auto_processed': False,
            'error': str(e),
            'message': 'è‡ªåŠ¨å¤„ç†æ‰§è¡Œå¤±è´¥ï¼Œè½¬ä¸ºäººå·¥å¤„ç†'
        }

def handle_auto_resolve(alert_info, rule):
    """
    è‡ªåŠ¨è§£å†³å‘Šè­¦
    """
    # æ£€æŸ¥æ˜¯å¦å¯ä»¥è‡ªåŠ¨è§£å†³
    if not can_auto_resolve(alert_info, rule):
        return {
            'auto_processed': False,
            'message': 'ä¸æ»¡è¶³è‡ªåŠ¨è§£å†³æ¡ä»¶ï¼Œè½¬ä¸ºäººå·¥å¤„ç†'
        }
    
    # æ›´æ–°å‘Šè­¦çŠ¶æ€
    update_alert_status(alert_info['id'], 'RESOLVED', 'ç³»ç»Ÿè‡ªåŠ¨è§£å†³')
    
    # è®°å½•å¤„ç†æ—¥å¿—
    log_auto_process_action(alert_info['id'], 'AUTO_RESOLVE', 'åŸºäºè§„åˆ™è‡ªåŠ¨è§£å†³', rule['id'])
    
    logger.info(f"å‘Šè­¦å·²è‡ªåŠ¨è§£å†³: alert_id={alert_info['id']}, device_sn={alert_info['device_sn']}")
    
    return {
        'auto_processed': True,
        'action': 'AUTO_RESOLVE',
        'message': 'å‘Šè­¦å·²è‡ªåŠ¨è§£å†³',
        'status': 'RESOLVED'
    }

def handle_auto_acknowledge(alert_info, rule):
    """
    è‡ªåŠ¨ç¡®è®¤å‘Šè­¦
    """
    # æ›´æ–°å‘Šè­¦çŠ¶æ€
    update_alert_status(alert_info['id'], 'ACKNOWLEDGED', 'ç³»ç»Ÿè‡ªåŠ¨ç¡®è®¤')
    
    # è®°å½•å¤„ç†æ—¥å¿—
    log_auto_process_action(alert_info['id'], 'AUTO_ACKNOWLEDGE', 'ç³»ç»Ÿè‡ªåŠ¨ç¡®è®¤', rule['id'])
    
    logger.info(f"å‘Šè­¦å·²è‡ªåŠ¨ç¡®è®¤: alert_id={alert_info['id']}, device_sn={alert_info['device_sn']}")
    
    return {
        'auto_processed': True,
        'action': 'AUTO_ACKNOWLEDGE',
        'message': 'å‘Šè­¦å·²è‡ªåŠ¨ç¡®è®¤',
        'status': 'ACKNOWLEDGED'
    }

def handle_auto_suppress(alert_info, rule):
    """
    è‡ªåŠ¨æŠ‘åˆ¶å‘Šè­¦
    """
    suppress_duration = rule.get('suppress_duration_minutes', 60)
    
    # æ›´æ–°å‘Šè­¦çŠ¶æ€
    update_alert_status(alert_info['id'], 'SUPPRESSED', f'ç³»ç»Ÿè‡ªåŠ¨æŠ‘åˆ¶{suppress_duration}åˆ†é’Ÿ')
    
    # è®¾ç½®æŠ‘åˆ¶åˆ°æœŸæ—¶é—´
    suppress_until = get_now() + timedelta(minutes=suppress_duration)
    schedule_suppression_expiry(alert_info['id'], suppress_until)
    
    # è®°å½•å¤„ç†æ—¥å¿—
    log_auto_process_action(alert_info['id'], 'AUTO_SUPPRESS', f'è‡ªåŠ¨æŠ‘åˆ¶{suppress_duration}åˆ†é’Ÿ', rule['id'])
    
    logger.info(f"å‘Šè­¦å·²è‡ªåŠ¨æŠ‘åˆ¶: alert_id={alert_info['id']}, duration={suppress_duration}min")
    
    return {
        'auto_processed': True,
        'action': 'AUTO_SUPPRESS',
        'message': f'å‘Šè­¦å·²è‡ªåŠ¨æŠ‘åˆ¶{suppress_duration}åˆ†é’Ÿ',
        'status': 'SUPPRESSED',
        'suppress_until': suppress_until.isoformat()
    }

def can_auto_resolve(alert_info, rule):
    """
    æ£€æŸ¥æ˜¯å¦å¯ä»¥è‡ªåŠ¨è§£å†³
    """
    # æ£€æŸ¥å‘Šè­¦ç±»å‹
    alert_type = alert_info.get('alert_type', '')
    auto_resolvable_types = [
        'heart_rate_abnormal', 'blood_oxygen_low', 'temperature_abnormal',
        'device_offline', 'battery_low', 'step_insufficient'
    ]
    
    if alert_type not in auto_resolvable_types:
        return False
    
    # æ£€æŸ¥ä¸¥é‡ç¨‹åº¦ (criticalçº§åˆ«ä¸è‡ªåŠ¨è§£å†³)
    if alert_info.get('severity_level', '').lower() == 'critical':
        return False
    
    # æ£€æŸ¥æœ€è¿‘è‡ªåŠ¨è§£å†³æ¬¡æ•°
    threshold_count = rule.get('auto_resolve_threshold_count', 1)
    recent_count = count_recent_auto_resolved_alerts(
        alert_info['device_sn'], alert_type, hours=24
    )
    
    return recent_count < threshold_count

def is_alert_suppressed(health_data, rule, device_info):
    """
    æ£€æŸ¥å‘Šè­¦æ˜¯å¦è¢«æŠ‘åˆ¶
    """
    try:
        # æ£€æŸ¥åŒç±»å‹å‘Šè­¦çš„æŠ‘åˆ¶çŠ¶æ€
        alert_type = build_alert_type(health_data, rule)
        device_sn = device_info.get('device_sn')
        
        # æŸ¥è¯¢æœ€è¿‘çš„æŠ‘åˆ¶è®°å½•
        suppressed_alerts = db.session.query(AlertInfo).filter(
            AlertInfo.device_sn == device_sn,
            AlertInfo.alert_type == alert_type,
            AlertInfo.alert_status == 'SUPPRESSED',
            AlertInfo.auto_close_time > get_now()
        ).count()
        
        return suppressed_alerts > 0
        
    except Exception as e:
        logger.error(f"æ£€æŸ¥å‘Šè­¦æŠ‘åˆ¶çŠ¶æ€å¤±è´¥: {e}")
        return False

def update_alert_status(alert_id, status, reason):
    """
    æ›´æ–°å‘Šè­¦çŠ¶æ€
    """
    try:
        alert = db.session.query(AlertInfo).filter(AlertInfo.id == alert_id).first()
        if alert:
            alert.alert_status = status
            alert.responded_time = get_now()
            alert.auto_processed = True
            alert.auto_process_time = get_now()
            alert.auto_process_reason = reason
            alert.processing_stage = status
            db.session.commit()
            
    except Exception as e:
        logger.error(f"æ›´æ–°å‘Šè­¦çŠ¶æ€å¤±è´¥: alert_id={alert_id}, {e}")
        db.session.rollback()

def log_auto_process_action(alert_id, action, reason, rule_id):
    """
    è®°å½•è‡ªåŠ¨å¤„ç†æ—¥å¿—
    """
    try:
        action_log = AlertLog(
            alert_id=alert_id,
            action_type=action,
            action_result='SUCCESS',
            action_reason=reason,
            processed_by='SYSTEM',
            rule_id=rule_id,
            processed_time=get_now()
        )
        db.session.add(action_log)
        db.session.commit()
        
    except Exception as e:
        logger.error(f"è®°å½•è‡ªåŠ¨å¤„ç†æ—¥å¿—å¤±è´¥: alert_id={alert_id}, {e}")
        db.session.rollback()

# é›†æˆåˆ°ç°æœ‰çš„upload_health_dataå’Œupload_common_eventæµç¨‹
def process_health_data_alerts(health_data, user_info, device_info):
    """
    å¤„ç†health_dataçš„å‘Šè­¦ (é›†æˆåˆ°ç°æœ‰çš„upload_health_data)
    """
    try:
        # è·å–é€‚ç”¨çš„å‘Šè­¦è§„åˆ™
        applicable_rules = get_applicable_alert_rules(health_data, user_info)
        
        results = []
        for rule in applicable_rules:
            # ä½¿ç”¨æ–°çš„è‡ªåŠ¨å¤„ç†æ–¹æ³•
            result = generate_alert_with_auto_process(health_data, rule, user_info, device_info)
            if result['alert_generated']:
                results.append(result)
        
        return {
            'processed_count': len(results),
            'auto_processed_count': sum(1 for r in results if r.get('auto_processed', False)),
            'manual_review_count': sum(1 for r in results if not r.get('auto_processed', False)),
            'results': results
        }
        
    except Exception as e:
        logger.error(f"å¤„ç†å¥åº·æ•°æ®å‘Šè­¦å¤±è´¥: {e}")
        return {'processed_count': 0, 'error': str(e)}

def process_common_event_alerts(event_data, user_info, device_info):
    """
    å¤„ç†common_eventçš„å‘Šè­¦ (é›†æˆåˆ°ç°æœ‰çš„upload_common_event)
    """
    try:
        # æ ¹æ®äº‹ä»¶ç±»å‹è·å–ç›¸åº”çš„å‘Šè­¦è§„åˆ™
        applicable_rules = get_event_alert_rules(event_data, user_info)
        
        results = []
        for rule in applicable_rules:
            # å°†äº‹ä»¶æ•°æ®è½¬æ¢ä¸ºhealth_dataæ ¼å¼
            health_data = convert_event_to_health_data(event_data)
            
            # ä½¿ç”¨ç»Ÿä¸€çš„è‡ªåŠ¨å¤„ç†æ–¹æ³•
            result = generate_alert_with_auto_process(health_data, rule, user_info, device_info)
            if result['alert_generated']:
                results.append(result)
        
        return {
            'processed_count': len(results),
            'auto_processed_count': sum(1 for r in results if r.get('auto_processed', False)),
            'manual_review_count': sum(1 for r in results if not r.get('auto_processed', False)),
            'results': results
        }
        
    except Exception as e:
        logger.error(f"å¤„ç†é€šç”¨äº‹ä»¶å‘Šè­¦å¤±è´¥: {e}")
        return {'processed_count': 0, 'error': str(e)}
```

### é˜¶æ®µä¸‰ï¼šè‡ªåŠ¨å¤„ç†è§„åˆ™ç®¡ç†ç•Œé¢ (2å¤©)

#### 3.1 å‘Šè­¦è§„åˆ™ç®¡ç†ç•Œé¢
åœ¨ljwx-adminä¸­æ–°å¢å‘Šè­¦è‡ªåŠ¨å¤„ç†è§„åˆ™çš„é…ç½®ç•Œé¢ï¼š

```vue
<!-- ljwx-admin/src/views/health/alert-auto-process/index.vue -->
<template>
  <div class="alert-auto-process">
    <el-card class="page-header">
      <template #header>
        <div class="card-header">
          <span>å‘Šè­¦è‡ªåŠ¨å¤„ç†è§„åˆ™</span>
          <el-button type="primary" @click="handleAdd">
            <el-icon><Plus /></el-icon>
            æ–°å¢è§„åˆ™
          </el-button>
        </div>
      </template>
      
      <!-- æœç´¢æ¡ä»¶ -->
      <el-form :model="queryParams" ref="queryRef" :inline="true" class="search-form">
        <el-form-item label="è§„åˆ™åç§°" prop="ruleName">
          <el-input v-model="queryParams.ruleName" placeholder="è¯·è¾“å…¥è§„åˆ™åç§°" clearable />
        </el-form-item>
        <el-form-item label="å‘Šè­¦ç±»å‹" prop="alertType">
          <el-select v-model="queryParams.alertType" placeholder="è¯·é€‰æ‹©å‘Šè­¦ç±»å‹" clearable>
            <el-option label="å¿ƒç‡å¼‚å¸¸" value="heart_rate_abnormal" />
            <el-option label="è¡€æ°§å¼‚å¸¸" value="blood_oxygen_low" />
            <el-option label="ä½“æ¸©å¼‚å¸¸" value="temperature_abnormal" />
            <el-option label="è®¾å¤‡ç¦»çº¿" value="device_offline" />
            <el-option label="ç”µé‡ä¸è¶³" value="battery_low" />
          </el-select>
        </el-form-item>
        <el-form-item label="çŠ¶æ€" prop="isEnabled">
          <el-select v-model="queryParams.isEnabled" placeholder="è¯·é€‰æ‹©çŠ¶æ€" clearable>
            <el-option label="å¯ç”¨" :value="true" />
            <el-option label="ç¦ç”¨" :value="false" />
          </el-select>
        </el-form-item>
        <el-form-item>
          <el-button type="primary" @click="handleQuery">
            <el-icon><Search /></el-icon>
            æœç´¢
          </el-button>
          <el-button @click="resetQuery">
            <el-icon><Refresh /></el-icon>
            é‡ç½®
          </el-button>
        </el-form-item>
      </el-form>
    </el-card>

    <!-- æ•°æ®è¡¨æ ¼ -->
    <el-card>
      <el-table v-loading="loading" :data="alertRulesList">
        <el-table-column label="è§„åˆ™ID" prop="id" width="80" />
        <el-table-column label="å‘Šè­¦ç±»å‹" prop="alertType" width="120">
          <template #default="scope">
            <el-tag :type="getAlertTypeTag(scope.row.alertType)">
              {{ getAlertTypeText(scope.row.alertType) }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column label="ä¸¥é‡ç¨‹åº¦" prop="severityLevel" width="100">
          <template #default="scope">
            <el-tag :type="getSeverityTag(scope.row.severityLevel)">
              {{ scope.row.severityLevel }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column label="è‡ªåŠ¨å¤„ç†" prop="autoProcessEnabled" width="100">
          <template #default="scope">
            <el-switch 
              v-model="scope.row.autoProcessEnabled" 
              @change="handleToggleAutoProcess(scope.row)"
              :disabled="!hasPermission('alert:rules:edit')"
            />
          </template>
        </el-table-column>
        <el-table-column label="å¤„ç†åŠ¨ä½œ" prop="autoProcessAction" width="120">
          <template #default="scope">
            <el-tag v-if="scope.row.autoProcessAction" :type="getActionTag(scope.row.autoProcessAction)">
              {{ getActionText(scope.row.autoProcessAction) }}
            </el-tag>
            <span v-else>-</span>
          </template>
        </el-table-column>
        <el-table-column label="å»¶è¿Ÿå¤„ç†" prop="autoProcessDelaySeconds" width="100">
          <template #default="scope">
            {{ scope.row.autoProcessDelaySeconds ? `${scope.row.autoProcessDelaySeconds}ç§’` : 'ç«‹å³' }}
          </template>
        </el-table-column>
        <el-table-column label="çŠ¶æ€" prop="isEnabled" width="80">
          <template #default="scope">
            <el-tag :type="scope.row.isEnabled ? 'success' : 'danger'">
              {{ scope.row.isEnabled ? 'å¯ç”¨' : 'ç¦ç”¨' }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column label="åˆ›å»ºæ—¶é—´" prop="createTime" width="160">
          <template #default="scope">
            {{ formatDateTime(scope.row.createTime) }}
          </template>
        </el-table-column>
        <el-table-column label="æ“ä½œ" width="200" fixed="right">
          <template #default="scope">
            <el-button type="primary" link @click="handleEdit(scope.row)" 
                      v-if="hasPermission('alert:rules:edit')">
              ç¼–è¾‘
            </el-button>
            <el-button type="primary" link @click="handleView(scope.row)">
              æŸ¥çœ‹
            </el-button>
            <el-button type="danger" link @click="handleDelete(scope.row)" 
                      v-if="hasPermission('alert:rules:delete')">
              åˆ é™¤
            </el-button>
          </template>
        </el-table-column>
      </el-table>
      
      <pagination
        v-show="total > 0"
        :total="total"
        v-model:page="queryParams.pageNum"
        v-model:limit="queryParams.pageSize"
        @pagination="getList"
      />
    </el-card>

    <!-- ç¼–è¾‘å¯¹è¯æ¡† -->
    <el-dialog v-model="dialog.visible" :title="dialog.title" width="800px" append-to-body>
      <el-form ref="alertRuleFormRef" :model="form" :rules="rules" label-width="120px">
        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item label="å‘Šè­¦ç±»å‹" prop="alertType">
              <el-select v-model="form.alertType" placeholder="è¯·é€‰æ‹©å‘Šè­¦ç±»å‹" :disabled="form.id">
                <el-option label="å¿ƒç‡å¼‚å¸¸" value="heart_rate_abnormal" />
                <el-option label="è¡€æ°§å¼‚å¸¸" value="blood_oxygen_low" />
                <el-option label="ä½“æ¸©å¼‚å¸¸" value="temperature_abnormal" />
                <el-option label="è®¾å¤‡ç¦»çº¿" value="device_offline" />
                <el-option label="ç”µé‡ä¸è¶³" value="battery_low" />
              </el-select>
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item label="ä¸¥é‡ç¨‹åº¦" prop="severityLevel">
              <el-select v-model="form.severityLevel" placeholder="è¯·é€‰æ‹©ä¸¥é‡ç¨‹åº¦">
                <el-option label="Critical" value="critical" />
                <el-option label="High" value="high" />
                <el-option label="Medium" value="medium" />
                <el-option label="Low" value="low" />
              </el-select>
            </el-form-item>
          </el-col>
        </el-row>
        
        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item label="é˜ˆå€¼èŒƒå›´">
              <el-input-group>
                <el-input v-model="form.thresholdMin" placeholder="æœ€å°å€¼" />
                <el-input v-model="form.thresholdMax" placeholder="æœ€å¤§å€¼" />
              </el-input-group>
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item label="æ—¶é—´çª—å£" prop="timeWindowSeconds">
              <el-input v-model="form.timeWindowSeconds" placeholder="ç§’" type="number" />
            </el-form-item>
          </el-col>
        </el-row>
        
        <el-divider content-position="left">è‡ªåŠ¨å¤„ç†é…ç½®</el-divider>
        
        <el-row :gutter="20">
          <el-col :span="12">
            <el-form-item label="å¯ç”¨è‡ªåŠ¨å¤„ç†" prop="autoProcessEnabled">
              <el-switch v-model="form.autoProcessEnabled" />
            </el-form-item>
          </el-col>
          <el-col :span="12">
            <el-form-item label="å¤„ç†åŠ¨ä½œ" prop="autoProcessAction" v-if="form.autoProcessEnabled">
              <el-select v-model="form.autoProcessAction" placeholder="è¯·é€‰æ‹©å¤„ç†åŠ¨ä½œ">
                <el-option label="è‡ªåŠ¨è§£å†³" value="AUTO_RESOLVE" />
                <el-option label="è‡ªåŠ¨ç¡®è®¤" value="AUTO_ACKNOWLEDGE" />
                <el-option label="è‡ªåŠ¨æŠ‘åˆ¶" value="AUTO_SUPPRESS" />
                <el-option label="è‡ªåŠ¨å‡çº§" value="AUTO_ESCALATE" />
              </el-select>
            </el-form-item>
          </el-col>
        </el-row>
        
        <el-row :gutter="20" v-if="form.autoProcessEnabled">
          <el-col :span="12">
            <el-form-item label="å»¶è¿Ÿå¤„ç†" prop="autoProcessDelaySeconds">
              <el-input v-model="form.autoProcessDelaySeconds" placeholder="å»¶è¿Ÿç§’æ•°(0è¡¨ç¤ºç«‹å³)" type="number" />
            </el-form-item>
          </el-col>
          <el-col :span="12" v-if="form.autoProcessAction === 'AUTO_SUPPRESS'">
            <el-form-item label="æŠ‘åˆ¶æ—¶é•¿" prop="suppressDurationMinutes">
              <el-input v-model="form.suppressDurationMinutes" placeholder="åˆ†é’Ÿ" type="number" />
            </el-form-item>
          </el-col>
          <el-col :span="12" v-if="form.autoProcessAction === 'AUTO_RESOLVE'">
            <el-form-item label="è‡ªåŠ¨æ¢å¤é˜ˆå€¼" prop="autoResolveThresholdCount">
              <el-input v-model="form.autoResolveThresholdCount" placeholder="24å°æ—¶å†…æœ€å¤§æ¬¡æ•°" type="number" />
            </el-form-item>
          </el-col>
        </el-row>
        
        <el-form-item label="è§„åˆ™çŠ¶æ€" prop="isEnabled">
          <el-radio-group v-model="form.isEnabled">
            <el-radio :label="true">å¯ç”¨</el-radio>
            <el-radio :label="false">ç¦ç”¨</el-radio>
          </el-radio-group>
        </el-form-item>
      </el-form>
      
      <template #footer>
        <div class="dialog-footer">
          <el-button @click="dialog.visible = false">å–æ¶ˆ</el-button>
          <el-button type="primary" @click="submitForm">ç¡®å®š</el-button>
        </div>
      </template>
    </el-dialog>
  </div>
</template>
```

### é˜¶æ®µå››ï¼šç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ– (2å¤©)

#### 3.1 åŸºäºç°æœ‰AlertRulesCacheManagerçš„è·¨DBé€šä¿¡å¢å¼º

```python
# åœ¨ljwx-bigscreen/bigscreen/alert_rules_cache_manager.pyä¸­å¢å¼º

class EnhancedAlertRulesCacheManager(AlertRulesCacheManager):
    """å¢å¼ºç‰ˆå‘Šè­¦è§„åˆ™ç¼“å­˜ç®¡ç†å™¨"""
    
    def __init__(self):
        super().__init__()
        # æ–°å¢æ¶ˆæ¯å»é‡ç¼“å­˜
        self.dedup_cache = {}
        self.performance_stats = {
            'cache_hits': 0,
            'cache_misses': 0,
            'sync_success': 0,
            'sync_failures': 0
        }
    
    def sync_alert_with_deduplication(self, alert_info, rule_info):
        """
        å¸¦å»é‡çš„å‘Šè­¦åŒæ­¥
        """
        try:
            # ç”Ÿæˆå»é‡é”®
            dedup_key = self.generate_dedup_key(alert_info)
            
            # æ£€æŸ¥æ˜¯å¦ä¸ºé‡å¤å‘Šè­¦
            if self.is_duplicate_alert(dedup_key):
                logger.info(f"å‘Šè­¦å»é‡: {dedup_key}")
                return {'synced': False, 'reason': 'duplicate'}
            
            # åŒæ­¥åˆ°ljwx-boot
            sync_result = self.sync_to_boot_system(alert_info, rule_info)
            
            if sync_result['success']:
                # è®°å½•å»é‡ä¿¡æ¯
                self.record_dedup_info(dedup_key, alert_info)
                self.performance_stats['sync_success'] += 1
                
                # å‘å¸ƒRedisæ¶ˆæ¯
                self.publish_alert_created_event(alert_info)
                
                return {'synced': True, 'boot_response': sync_result}
            else:
                self.performance_stats['sync_failures'] += 1
                return {'synced': False, 'reason': 'boot_sync_failed', 'error': sync_result.get('error')}
                
        except Exception as e:
            logger.error(f"å‘Šè­¦åŒæ­¥å¤±è´¥: {e}")
            self.performance_stats['sync_failures'] += 1
            return {'synced': False, 'reason': 'sync_error', 'error': str(e)}
    
    def generate_dedup_key(self, alert_info):
        """ç”Ÿæˆå»é‡é”®"""
        components = [
            str(alert_info.get('device_sn', '')),
            str(alert_info.get('alert_type', '')),
            str(alert_info.get('user_id', '')),
            str(alert_info.get('physical_sign', ''))
        ]
        return hashlib.md5('|'.join(components).encode()).hexdigest()
    
    def is_duplicate_alert(self, dedup_key, time_window=300):
        """
        æ£€æŸ¥æ˜¯å¦ä¸ºé‡å¤å‘Šè­¦ (5åˆ†é’Ÿçª—å£)
        """
        if dedup_key not in self.dedup_cache:
            return False
        
        last_time = self.dedup_cache[dedup_key]['timestamp']
        return (time.time() - last_time) < time_window
    
    def sync_to_boot_system(self, alert_info, rule_info):
        """
        åŒæ­¥å‘Šè­¦åˆ°ljwx-bootç³»ç»Ÿ
        """
        try:
            # æ„å»ºæ¶ˆæ¯è´Ÿè½½
            message_payload = {
                'messageType': 'ALERT_GENERATED',
                'alertInfo': alert_info,
                'ruleInfo': rule_info,
                'timestamp': time.time(),
                'source': 'ljwx-bigscreen'
            }
            
            # å‘é€åˆ°ljwx-bootçš„Redisé˜Ÿåˆ—
            queue_key = 'ljwx:message:alert_generated'
            self.boot_redis_client.lpush(queue_key, json.dumps(message_payload))
            self.boot_redis_client.expire(queue_key, 3600)  # 1å°æ—¶è¿‡æœŸ
            
            # å‘å¸ƒåŒæ­¥é€šçŸ¥
            self.boot_redis_client.publish('ljwx:alert:sync', json.dumps({
                'event': 'ALERT_SYNC',
                'alertId': alert_info.get('id'),
                'deviceSn': alert_info.get('device_sn')
            }))
            
            return {'success': True, 'message': 'sync_completed'}
            
        except Exception as e:
            logger.error(f"åŒæ­¥åˆ°bootç³»ç»Ÿå¤±è´¥: {e}")
            return {'success': False, 'error': str(e)}
    
    def publish_alert_created_event(self, alert_info):
        """
        å‘å¸ƒå‘Šè­¦åˆ›å»ºäº‹ä»¶
        """
        try:
            event_data = {
                'eventType': 'ALERT_CREATED',
                'alertId': alert_info.get('id'),
                'deviceSn': alert_info.get('device_sn'),
                'userId': alert_info.get('user_id'),
                'severity': alert_info.get('severity_level'),
                'timestamp': time.time()
            }
            
            # å‘å¸ƒåˆ°bigscreenè‡ªèº«çš„Redis
            self.redis_client.publish('ljwx:bigscreen:alert_created', json.dumps(event_data))
            
            logger.debug(f"å‘Šè­¦åˆ›å»ºäº‹ä»¶å·²å‘å¸ƒ: alertId={alert_info.get('id')}")
            
        except Exception as e:
            logger.error(f"å‘å¸ƒå‘Šè­¦äº‹ä»¶å¤±è´¥: {e}")
    
    def get_performance_stats(self):
        """è·å–æ€§èƒ½ç»Ÿè®¡"""
        total_requests = self.performance_stats['cache_hits'] + self.performance_stats['cache_misses']
        cache_hit_rate = (self.performance_stats['cache_hits'] / total_requests * 100) if total_requests > 0 else 0
        
        return {
            'cache_hit_rate': round(cache_hit_rate, 2),
            'total_sync_success': self.performance_stats['sync_success'],
            'total_sync_failures': self.performance_stats['sync_failures'],
            'sync_success_rate': (self.performance_stats['sync_success'] / 
                                 (self.performance_stats['sync_success'] + self.performance_stats['sync_failures']) * 100) 
                                if (self.performance_stats['sync_success'] + self.performance_stats['sync_failures']) > 0 else 0
        }
```

#### 3.2 ljwx-bootæ¶ˆæ¯å¤„ç†å¢å¼º

```java
// åœ¨ljwx-bootä¸­æ–°å¢å‘Šè­¦æ¶ˆæ¯æ¶ˆè´¹è€…
@Component
@Slf4j
public class AlertMessageConsumer {
    
    @Autowired
    private UnifiedMessagePublisher messagePublisher;
    
    @Autowired
    private AlertRuleEngineService ruleEngine;
    
    @Autowired
    private RedisTemplate<String, Object> redisTemplate;
    
    @EventListener
    @Async
    public void handleAlertFromBigscreen(String message) {
        try {
            ObjectMapper mapper = new ObjectMapper();
            Map<String, Object> alertData = mapper.readValue(message, Map.class);
            
            if ("ALERT_GENERATED".equals(alertData.get("messageType"))) {
                processAlertFromBigscreen(alertData);
            }
            
        } catch (Exception e) {
            log.error("å¤„ç†bigscreenå‘Šè­¦æ¶ˆæ¯å¤±è´¥", e);
        }
    }
    
    private void processAlertFromBigscreen(Map<String, Object> alertData) {
        try {
            // è§£æå‘Šè­¦ä¿¡æ¯
            Map<String, Object> alertInfo = (Map<String, Object>) alertData.get("alertInfo");
            Map<String, Object> ruleInfo = (Map<String, Object>) alertData.get("ruleInfo");
            
            // æ„å»ºAlertMessageå¯¹è±¡
            AlertMessage alertMessage = AlertMessage.builder()
                .ruleId(Long.valueOf(ruleInfo.get("id").toString()))
                .alertType(alertInfo.get("alert_type").toString())
                .deviceSn(alertInfo.get("device_sn").toString())
                .alertDesc(alertInfo.get("alert_desc").toString())
                .severityLevel(alertInfo.get("severity_level").toString())
                .userId(Long.valueOf(alertInfo.get("user_id").toString()))
                .orgId(alertInfo.get("org_id") != null ? Long.valueOf(alertInfo.get("org_id").toString()) : null)
                .customerId(Long.valueOf(ruleInfo.get("customer_id").toString()))
                .enabledChannels(parseEnabledChannels(ruleInfo))
                .build();
            
            // ä½¿ç”¨æ™ºèƒ½æ¶ˆæ¯å‘å¸ƒå™¨å¤„ç†
            CompletableFuture<PublishResult> result = messagePublisher.publishSmartAlert(alertMessage);
            
            result.thenAccept(publishResult -> {
                if (publishResult.isSuccess()) {
                    log.info("Bigscreenå‘Šè­¦å¤„ç†æˆåŠŸ: messageId={}, deviceSn={}", 
                        publishResult.getMessageId(), alertMessage.getDeviceSn());
                    
                    // æ›´æ–°bigscreenå‘Šè­¦çŠ¶æ€
                    updateBigscreenAlertStatus(alertInfo.get("id").toString(), "PROCESSED");
                } else {
                    log.error("Bigscreenå‘Šè­¦å¤„ç†å¤±è´¥: deviceSn={}, error={}", 
                        alertMessage.getDeviceSn(), publishResult.getMessage());
                }
            });
            
        } catch (Exception e) {
            log.error("å¤„ç†Bigscreenå‘Šè­¦å¼‚å¸¸", e);
        }
    }
    
    private void updateBigscreenAlertStatus(String alertId, String status) {
        try {
            Map<String, Object> statusUpdate = Map.of(
                "alertId", alertId,
                "status", status,
                "updateTime", System.currentTimeMillis()
            );
            
            redisTemplate.convertAndSend("ljwx:bigscreen:alert_status_update", statusUpdate);
            
        } catch (Exception e) {
            log.error("æ›´æ–°Bigscreenå‘Šè­¦çŠ¶æ€å¤±è´¥: alertId={}", alertId, e);
        }
    }
    
    private List<String> parseEnabledChannels(Map<String, Object> ruleInfo) {
        Object enabledChannels = ruleInfo.get("enabled_channels");
        if (enabledChannels instanceof List) {
            return (List<String>) enabledChannels;
        } else if (enabledChannels instanceof String) {
            try {
                ObjectMapper mapper = new ObjectMapper();
                return mapper.readValue(enabledChannels.toString(), List.class);
            } catch (Exception e) {
                log.warn("è§£æenabled_channelså¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®");
            }
        }
        return Arrays.asList("message", "wechat"); // é»˜è®¤é…ç½®
    }
}
```

### é˜¶æ®µå››ï¼šç›‘æ§ä¸å¯è§†åŒ–å®ç° (2-3å¤©)

#### 4.1 å‘Šè­¦æ€§èƒ½ç›‘æ§æ¥å£

```java
// ljwx-boot-admin/src/main/java/com/ljwx/admin/controller/monitor/AlertPerformanceController.java å¢å¼º

@RestController
@RequestMapping("/admin/monitor/alert")
@PreAuthorize("hasAuthority('alert:monitor')")
public class AlertPerformanceController {
    
    @Autowired
    private UnifiedMessagePublisher messagePublisher;
    
    @Autowired
    private AlertRuleEngineService ruleEngine;
    
    /**
     * è·å–å‘Šè­¦ç³»ç»Ÿç»¼åˆæ€§èƒ½æŠ¥å‘Š
     */
    @GetMapping("/performance/comprehensive")
    public Result<Map<String, Object>> getComprehensivePerformance() {
        try {
            Map<String, Object> report = new HashMap<>();
            
            // æ¶ˆæ¯å‘å¸ƒç»Ÿè®¡
            report.put("messageStats", messagePublisher.getMessageStats());
            
            // è§„åˆ™å¼•æ“ç»Ÿè®¡
            report.put("ruleEngineStats", ruleEngine.getPerformanceStats());
            
            // ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
            report.put("systemResources", getSystemResourceUsage());
            
            // æ•°æ®åº“æ€§èƒ½
            report.put("databasePerformance", getDatabasePerformanceMetrics());
            
            // Redisæ€§èƒ½
            report.put("redisPerformance", getRedisPerformanceMetrics());
            
            // å‘Šè­¦å¤„ç†å»¶è¿Ÿåˆ†æ
            report.put("latencyAnalysis", getAlertLatencyAnalysis());
            
            return Result.ok(report);
            
        } catch (Exception e) {
            return Result.error("è·å–æ€§èƒ½æŠ¥å‘Šå¤±è´¥: " + e.getMessage());
        }
    }
    
    /**
     * è·å–å‘Šè­¦å¤„ç†å»¶è¿Ÿåˆ†æ
     */
    @GetMapping("/latency/analysis")
    public Result<Map<String, Object>> getLatencyAnalysis(@RequestParam(defaultValue = "24") int hours) {
        try {
            // æŸ¥è¯¢æœ€è¿‘Nå°æ—¶çš„å‘Šè­¦å¤„ç†å»¶è¿Ÿæ•°æ®
            List<Map<String, Object>> latencyData = alertService.getAlertLatencyData(hours);
            
            // è®¡ç®—ç»Ÿè®¡æŒ‡æ ‡
            DoubleSummaryStatistics stats = latencyData.stream()
                .mapToDouble(data -> Double.parseDouble(data.get("processing_time").toString()))
                .summaryStatistics();
            
            Map<String, Object> analysis = new HashMap<>();
            analysis.put("totalAlerts", latencyData.size());
            analysis.put("avgLatency", Math.round(stats.getAverage() * 100.0) / 100.0);
            analysis.put("minLatency", stats.getMin());
            analysis.put("maxLatency", stats.getMax());
            
            // P95å»¶è¿Ÿè®¡ç®—
            List<Double> sortedLatencies = latencyData.stream()
                .mapToDouble(data -> Double.parseDouble(data.get("processing_time").toString()))
                .sorted()
                .boxed()
                .collect(Collectors.toList());
            
            if (!sortedLatencies.isEmpty()) {
                int p95Index = (int) Math.ceil(sortedLatencies.size() * 0.95) - 1;
                analysis.put("p95Latency", sortedLatencies.get(Math.min(p95Index, sortedLatencies.size() - 1)));
            }
            
            // å»¶è¿Ÿåˆ†å¸ƒ
            analysis.put("latencyDistribution", calculateLatencyDistribution(sortedLatencies));
            
            // è¶‹åŠ¿åˆ†æ
            analysis.put("trends", analyzeLatencyTrends(latencyData));
            
            return Result.ok(analysis);
            
        } catch (Exception e) {
            return Result.error("å»¶è¿Ÿåˆ†æå¤±è´¥: " + e.getMessage());
        }
    }
    
    /**
     * å‘Šè­¦è´¨é‡åˆ†æ
     */
    @GetMapping("/quality/analysis")
    public Result<Map<String, Object>> getQualityAnalysis(@RequestParam(defaultValue = "7") int days) {
        try {
            Map<String, Object> quality = new HashMap<>();
            
            // æŸ¥è¯¢æŒ‡å®šå¤©æ•°å†…çš„å‘Šè­¦æ•°æ®
            List<Map<String, Object>> alertData = alertService.getAlertQualityData(days);
            
            // è¯¯æŠ¥ç‡åˆ†æ
            long totalAlerts = alertData.size();
            long falsePositives = alertData.stream()
                .mapToLong(alert -> {
                    String status = alert.get("alert_status").toString();
                    return "false_positive".equals(status) || "auto_dismissed".equals(status) ? 1 : 0;
                })
                .sum();
            
            double falsePositiveRate = totalAlerts > 0 ? (double) falsePositives / totalAlerts * 100 : 0;
            quality.put("falsePositiveRate", Math.round(falsePositiveRate * 100.0) / 100.0);
            quality.put("totalAlerts", totalAlerts);
            quality.put("falsePositives", falsePositives);
            
            // å“åº”æ—¶é—´åˆ†æ
            List<Long> responseTimes = alertData.stream()
                .filter(alert -> alert.get("responded_time") != null)
                .map(alert -> {
                    LocalDateTime alertTime = (LocalDateTime) alert.get("alert_timestamp");
                    LocalDateTime respondTime = (LocalDateTime) alert.get("responded_time");
                    return Duration.between(alertTime, respondTime).toMinutes();
                })
                .collect(Collectors.toList());
            
            if (!responseTimes.isEmpty()) {
                DoubleSummaryStatistics responseStats = responseTimes.stream()
                    .mapToDouble(Long::doubleValue)
                    .summaryStatistics();
                
                quality.put("avgResponseTime", Math.round(responseStats.getAverage() * 100.0) / 100.0);
                quality.put("minResponseTime", responseStats.getMin());
                quality.put("maxResponseTime", responseStats.getMax());
            }
            
            // æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†æ
            Map<String, Long> severityDistribution = alertData.stream()
                .collect(Collectors.groupingBy(
                    alert -> alert.get("severity_level").toString(),
                    Collectors.counting()
                ));
            quality.put("severityDistribution", severityDistribution);
            
            // æŒ‰å‘Šè­¦ç±»å‹åˆ†æ
            Map<String, Long> typeDistribution = alertData.stream()
                .collect(Collectors.groupingBy(
                    alert -> alert.get("alert_type").toString(),
                    Collectors.counting()
                ));
            quality.put("typeDistribution", typeDistribution);
            
            return Result.ok(quality);
            
        } catch (Exception e) {
            return Result.error("è´¨é‡åˆ†æå¤±è´¥: " + e.getMessage());
        }
    }
    
    private Map<String, Object> getSystemResourceUsage() {
        Runtime runtime = Runtime.getRuntime();
        
        Map<String, Object> resources = new HashMap<>();
        resources.put("totalMemory", runtime.totalMemory());
        resources.put("freeMemory", runtime.freeMemory());
        resources.put("usedMemory", runtime.totalMemory() - runtime.freeMemory());
        resources.put("maxMemory", runtime.maxMemory());
        resources.put("availableProcessors", runtime.availableProcessors());
        
        // JVMçº¿ç¨‹ä¿¡æ¯
        ThreadMXBean threadBean = ManagementFactory.getThreadMXBean();
        resources.put("threadCount", threadBean.getThreadCount());
        resources.put("peakThreadCount", threadBean.getPeakThreadCount());
        
        return resources;
    }
}
```

#### 4.2 å‘Šè­¦ç›‘æ§ä»ªè¡¨æ¿é¡µé¢

```vue
<!-- ljwx-adminå‰ç«¯ç›‘æ§é¡µé¢ -->
<template>
  <div class="alert-monitoring-dashboard">
    <el-row :gutter="20">
      <!-- å…³é”®æŒ‡æ ‡å¡ç‰‡ -->
      <el-col :span="6" v-for="metric in keyMetrics" :key="metric.key">
        <el-card class="metric-card">
          <div class="metric-content">
            <div class="metric-icon" :style="{ color: metric.color }">
              <component :is="metric.icon" />
            </div>
            <div class="metric-info">
              <div class="metric-value">{{ metric.value }}</div>
              <div class="metric-label">{{ metric.label }}</div>
              <div class="metric-trend" :class="metric.trendClass">
                {{ metric.trend }}
              </div>
            </div>
          </div>
        </el-card>
      </el-col>
    </el-row>

    <el-row :gutter="20" style="margin-top: 20px;">
      <!-- å‘Šè­¦å¤„ç†æ€§èƒ½å›¾è¡¨ -->
      <el-col :span="12">
        <el-card title="å‘Šè­¦å¤„ç†æ€§èƒ½">
          <div ref="performanceChartRef" style="height: 300px;"></div>
        </el-card>
      </el-col>
      
      <!-- å‘Šè­¦è´¨é‡åˆ†æ -->
      <el-col :span="12">
        <el-card title="å‘Šè­¦è´¨é‡åˆ†æ">
          <div ref="qualityChartRef" style="height: 300px;"></div>
        </el-card>
      </el-col>
    </el-row>

    <el-row :gutter="20" style="margin-top: 20px;">
      <!-- å®æ—¶å‘Šè­¦æµ -->
      <el-col :span="16">
        <el-card title="å®æ—¶å‘Šè­¦æµ">
          <div class="realtime-alerts">
            <div v-for="alert in realtimeAlerts" :key="alert.id" 
                 class="alert-item" :class="getSeverityClass(alert.severity)">
              <div class="alert-time">{{ formatTime(alert.timestamp) }}</div>
              <div class="alert-device">{{ alert.deviceSn }}</div>
              <div class="alert-type">{{ alert.alertType }}</div>
              <div class="alert-status">
                <el-tag :type="getStatusTagType(alert.status)">
                  {{ alert.status }}
                </el-tag>
              </div>
            </div>
          </div>
        </el-card>
      </el-col>
      
      <!-- ç³»ç»ŸçŠ¶æ€ -->
      <el-col :span="8">
        <el-card title="ç³»ç»ŸçŠ¶æ€">
          <div class="system-status">
            <div class="status-item">
              <span class="status-label">æ¶ˆæ¯é˜Ÿåˆ—:</span>
              <el-tag :type="systemStatus.messageQueue.healthy ? 'success' : 'danger'">
                {{ systemStatus.messageQueue.status }}
              </el-tag>
            </div>
            <div class="status-item">
              <span class="status-label">Redisè¿æ¥:</span>
              <el-tag :type="systemStatus.redis.healthy ? 'success' : 'danger'">
                {{ systemStatus.redis.status }}
              </el-tag>
            </div>
            <div class="status-item">
              <span class="status-label">æ•°æ®åº“:</span>
              <el-tag :type="systemStatus.database.healthy ? 'success' : 'danger'">
                {{ systemStatus.database.status }}
              </el-tag>
            </div>
            <div class="status-item">
              <span class="status-label">AIå¼•æ“:</span>
              <el-tag :type="systemStatus.aiEngine.healthy ? 'success' : 'danger'">
                {{ systemStatus.aiEngine.status }}
              </el-tag>
            </div>
          </div>
        </el-card>
      </el-col>
    </el-row>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'
import * as echarts from 'echarts'
import { TrendChartUp, Timer, CheckCircle, Warning } from '@element-plus/icons-vue'

// å“åº”å¼æ•°æ®
const performanceChartRef = ref(null)
const qualityChartRef = ref(null)
const realtimeAlerts = ref([])
const systemStatus = ref({
  messageQueue: { healthy: true, status: 'æ­£å¸¸' },
  redis: { healthy: true, status: 'æ­£å¸¸' },
  database: { healthy: true, status: 'æ­£å¸¸' },
  aiEngine: { healthy: true, status: 'æ­£å¸¸' }
})

// å…³é”®æŒ‡æ ‡
const keyMetrics = ref([
  {
    key: 'processing_speed',
    label: 'å¤„ç†é€Ÿåº¦',
    value: '850/åˆ†é’Ÿ',
    trend: '+12%',
    trendClass: 'trend-up',
    color: '#67c23a',
    icon: TrendChartUp
  },
  {
    key: 'avg_response_time',
    label: 'å¹³å‡å“åº”æ—¶é—´',
    value: '2.3ç§’',
    trend: '-15%',
    trendClass: 'trend-down',
    color: '#409eff',
    icon: Timer
  },
  {
    key: 'success_rate',
    label: 'å¤„ç†æˆåŠŸç‡',
    value: '99.2%',
    trend: '+0.5%',
    trendClass: 'trend-up',
    color: '#67c23a',
    icon: CheckCircle
  },
  {
    key: 'false_positive_rate',
    label: 'è¯¯æŠ¥ç‡',
    value: '7.8%',
    trend: '-20%',
    trendClass: 'trend-down',
    color: '#e6a23c',
    icon: Warning
  }
])

let performanceChart = null
let qualityChart = null
let refreshTimer = null

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  initCharts()
  loadMonitoringData()
  
  // å®šæ—¶åˆ·æ–°
  refreshTimer = setInterval(loadMonitoringData, 10000) // 10ç§’åˆ·æ–°
})

onUnmounted(() => {
  if (performanceChart) performanceChart.dispose()
  if (qualityChart) qualityChart.dispose()
  if (refreshTimer) clearInterval(refreshTimer)
})

// æ–¹æ³•
const initCharts = () => {
  // åˆå§‹åŒ–æ€§èƒ½å›¾è¡¨
  performanceChart = echarts.init(performanceChartRef.value)
  
  const performanceOption = {
    title: { text: 'å‘Šè­¦å¤„ç†æ€§èƒ½', left: 'center' },
    tooltip: { trigger: 'axis' },
    xAxis: { type: 'category', data: [] },
    yAxis: { type: 'value' },
    series: [
      {
        name: 'å¤„ç†é‡',
        type: 'line',
        data: [],
        smooth: true,
        itemStyle: { color: '#409eff' }
      },
      {
        name: 'å“åº”æ—¶é—´(ms)',
        type: 'line',
        data: [],
        smooth: true,
        yAxisIndex: 1,
        itemStyle: { color: '#67c23a' }
      }
    ],
    yAxis: [
      { type: 'value', name: 'å¤„ç†é‡' },
      { type: 'value', name: 'å“åº”æ—¶é—´(ms)', position: 'right' }
    ]
  }
  
  performanceChart.setOption(performanceOption)
  
  // åˆå§‹åŒ–è´¨é‡å›¾è¡¨
  qualityChart = echarts.init(qualityChartRef.value)
  
  const qualityOption = {
    title: { text: 'å‘Šè­¦è´¨é‡åˆ†æ', left: 'center' },
    tooltip: { trigger: 'item' },
    series: [{
      name: 'å‘Šè­¦åˆ†å¸ƒ',
      type: 'pie',
      radius: '50%',
      data: [
        { value: 335, name: 'æ­£å¸¸å‘Šè­¦' },
        { value: 120, name: 'è¯¯æŠ¥å‘Šè­¦' },
        { value: 234, name: 'å·²å¤„ç†' },
        { value: 135, name: 'å¾…å¤„ç†' }
      ],
      emphasis: {
        itemStyle: {
          shadowBlur: 10,
          shadowOffsetX: 0,
          shadowColor: 'rgba(0, 0, 0, 0.5)'
        }
      }
    }]
  }
  
  qualityChart.setOption(qualityOption)
}

const loadMonitoringData = async () => {
  try {
    // åŠ è½½æ€§èƒ½æ•°æ®
    const performanceResponse = await fetch('/admin/monitor/alert/performance/comprehensive')
    const performanceData = await performanceResponse.json()
    
    if (performanceData.code === 200) {
      updateMetrics(performanceData.data)
      updatePerformanceChart(performanceData.data)
    }
    
    // åŠ è½½è´¨é‡æ•°æ®
    const qualityResponse = await fetch('/admin/monitor/alert/quality/analysis')
    const qualityData = await qualityResponse.json()
    
    if (qualityData.code === 200) {
      updateQualityChart(qualityData.data)
    }
    
    // åŠ è½½å®æ—¶å‘Šè­¦
    const realtimeResponse = await fetch('/admin/monitor/alert/realtime')
    const realtimeData = await realtimeResponse.json()
    
    if (realtimeData.code === 200) {
      realtimeAlerts.value = realtimeData.data
    }
    
  } catch (error) {
    console.error('åŠ è½½ç›‘æ§æ•°æ®å¤±è´¥:', error)
  }
}

const updateMetrics = (data) => {
  const messageStats = data.messageStats
  const ruleEngineStats = data.ruleEngineStats
  
  keyMetrics.value[0].value = `${Math.round(messageStats.publishCount / 60)}/åˆ†é’Ÿ`
  keyMetrics.value[1].value = `${Math.round(messageStats.avgProcessingTime)}ms`
  keyMetrics.value[2].value = `${Math.round(messageStats.successRate)}%`
  // å‡è®¾ä»è´¨é‡åˆ†æè·å–è¯¯æŠ¥ç‡æ•°æ®
}

const updatePerformanceChart = (data) => {
  // æ›´æ–°æ€§èƒ½å›¾è¡¨æ•°æ®
  const timeLabels = generateTimeLabels(24)
  const processingData = generatePerformanceData(data)
  
  performanceChart.setOption({
    xAxis: { data: timeLabels },
    series: [
      { data: processingData.processing },
      { data: processingData.responseTime }
    ]
  })
}

const updateQualityChart = (data) => {
  // æ›´æ–°è´¨é‡å›¾è¡¨æ•°æ®
  const qualityDistribution = [
    { value: data.totalAlerts - data.falsePositives, name: 'æ­£å¸¸å‘Šè­¦' },
    { value: data.falsePositives, name: 'è¯¯æŠ¥å‘Šè­¦' },
    // å…¶ä»–åˆ†ç±»...
  ]
  
  qualityChart.setOption({
    series: [{ data: qualityDistribution }]
  })
}

// å·¥å…·å‡½æ•°
const formatTime = (timestamp) => {
  return new Date(timestamp).toLocaleTimeString('zh-CN')
}

const getSeverityClass = (severity) => {
  const classes = {
    'critical': 'alert-critical',
    'high': 'alert-high', 
    'medium': 'alert-medium',
    'low': 'alert-low'
  }
  return classes[severity] || 'alert-medium'
}

const getStatusTagType = (status) => {
  const types = {
    'pending': 'warning',
    'processed': 'success',
    'failed': 'danger'
  }
  return types[status] || 'info'
}

const generateTimeLabels = (hours) => {
  const labels = []
  for (let i = hours - 1; i >= 0; i--) {
    const time = new Date()
    time.setHours(time.getHours() - i)
    labels.push(time.getHours() + ':00')
  }
  return labels
}

const generatePerformanceData = (data) => {
  // åŸºäºå®é™…æ•°æ®ç”Ÿæˆå›¾è¡¨æ•°æ®
  return {
    processing: Array.from({ length: 24 }, () => Math.floor(Math.random() * 100) + 50),
    responseTime: Array.from({ length: 24 }, () => Math.floor(Math.random() * 500) + 100)
  }
}
</script>

<style scoped>
.alert-monitoring-dashboard {
  padding: 20px;
}

.metric-card {
  height: 120px;
}

.metric-content {
  display: flex;
  align-items: center;
  height: 100%;
}

.metric-icon {
  font-size: 36px;
  margin-right: 15px;
}

.metric-info {
  flex: 1;
}

.metric-value {
  font-size: 24px;
  font-weight: bold;
  color: #303133;
  margin-bottom: 5px;
}

.metric-label {
  font-size: 14px;
  color: #606266;
  margin-bottom: 5px;
}

.metric-trend {
  font-size: 12px;
  font-weight: 500;
}

.trend-up {
  color: #67c23a;
}

.trend-down {
  color: #409eff;
}

.realtime-alerts {
  max-height: 400px;
  overflow-y: auto;
}

.alert-item {
  display: flex;
  align-items: center;
  padding: 10px;
  border-left: 4px solid #dcdfe6;
  margin-bottom: 8px;
  background-color: #f5f7fa;
}

.alert-critical {
  border-left-color: #f56c6c;
  background-color: #fef0f0;
}

.alert-high {
  border-left-color: #e6a23c;
  background-color: #fdf6ec;
}

.alert-medium {
  border-left-color: #409eff;
  background-color: #ecf5ff;
}

.alert-low {
  border-left-color: #909399;
  background-color: #f4f4f5;
}

.alert-time {
  width: 80px;
  font-size: 12px;
  color: #909399;
}

.alert-device {
  width: 120px;
  font-size: 14px;
  font-weight: 500;
}

.alert-type {
  flex: 1;
  font-size: 14px;
  color: #606266;
}

.alert-status {
  width: 80px;
}

.system-status {
  padding: 10px 0;
}

.status-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid #ebeef5;
}

.status-item:last-child {
  border-bottom: none;
}

.status-label {
  font-size: 14px;
  color: #606266;
}
</style>
```

---

## ğŸ“Š é¢„æœŸæ•ˆæœä¸éªŒæ”¶æ ‡å‡†

### æ ¸å¿ƒä¼˜åŒ–æ•ˆæœ

| æŒ‡æ ‡ | å½“å‰çŠ¶æ€ | ä¼˜åŒ–ç›®æ ‡ | æå‡å¹…åº¦ | è¯´æ˜ |
|------|----------|----------|----------|------|
| **è‡ªåŠ¨å¤„ç†ç‡** | 5% | 70% | **1300%** | åŸºäºè§„åˆ™è‡ªåŠ¨å¤„ç†å¸¸è§å‘Šè­¦ |
| äººå·¥å®¡æ ¸å·¥ä½œé‡ | 100% | 30% | **70%å‡å°‘** | å¤§å¹…å‡å°‘äººå·¥å¹²é¢„éœ€æ±‚ |
| å‘Šè­¦å¤„ç†å»¶è¿Ÿ | 30åˆ†é’Ÿ | 5ç§’ | **99.7%** | è‡ªåŠ¨å¤„ç†ç«‹å³å“åº” |
| å‘Šè­¦å“åº”æ—¶é—´ | äººå·¥30åˆ†é’Ÿ | è‡ªåŠ¨5ç§’ | **99.7%** | å…³é”®å‘Šè­¦ç§’çº§å¤„ç† |
| ç³»ç»Ÿååé‡ | 100å‘Šè­¦/åˆ†é’Ÿ | 1000å‘Šè­¦/åˆ†é’Ÿ | **900%** | æ”¯æŒå¤§è§„æ¨¡å‘Šè­¦å¤„ç† |

### åŠŸèƒ½éªŒæ”¶æ ‡å‡†

#### è‡ªåŠ¨å¤„ç†åŠŸèƒ½
- âœ… **è‡ªåŠ¨è§£å†³**: æ”¯æŒè®¾å¤‡ç¦»çº¿ã€ç”µé‡ä¸è¶³ç­‰å¸¸è§å‘Šè­¦è‡ªåŠ¨è§£å†³
- âœ… **è‡ªåŠ¨ç¡®è®¤**: éå…³é”®å‘Šè­¦è‡ªåŠ¨ç¡®è®¤ï¼Œå‡å°‘äººå·¥æ“ä½œ
- âœ… **è‡ªåŠ¨æŠ‘åˆ¶**: é‡å¤å‘Šè­¦è‡ªåŠ¨æŠ‘åˆ¶ï¼Œé¿å…å‘Šè­¦é£æš´
- âœ… **è‡ªåŠ¨å‡çº§**: é•¿æ—¶é—´æœªå¤„ç†çš„å‘Šè­¦è‡ªåŠ¨å‡çº§ä¼˜å…ˆçº§
- âœ… **è§„åˆ™é…ç½®**: ç®¡ç†ç•Œé¢æ”¯æŒçµæ´»é…ç½®è‡ªåŠ¨å¤„ç†è§„åˆ™
- âœ… **å¤„ç†æ—¥å¿—**: å®Œæ•´è®°å½•è‡ªåŠ¨å¤„ç†è¿‡ç¨‹å’ŒåŸå› 

#### ç³»ç»Ÿé›†æˆåŠŸèƒ½
- âœ… **upload_health_dataé›†æˆ**: å¥åº·æ•°æ®ä¸Šä¼ æ—¶è‡ªåŠ¨æ£€æµ‹å’Œå¤„ç†å‘Šè­¦
- âœ… **upload_common_eventé›†æˆ**: é€šç”¨äº‹ä»¶ä¸Šä¼ æ—¶è‡ªåŠ¨å¤„ç†ç›¸å…³å‘Šè­¦
- âœ… **è·¨ç³»ç»ŸåŒæ­¥**: ljwx-bigscreenä¸ljwx-bootå‘Šè­¦çŠ¶æ€å®æ—¶åŒæ­¥
- âœ… **æ¶ˆæ¯å»é‡**: é˜²æ­¢é‡å¤å‘Šè­¦ï¼Œå‡å°‘è¯¯æŠ¥å¹²æ‰°

### æŠ€æœ¯éªŒæ”¶æ ‡å‡†

- âœ… **æ•°æ®åº“ä¼˜åŒ–**: ç´¢å¼•è¦†ç›–ç‡>95%ï¼ŒæŸ¥è¯¢æ—¶é—´<100ms
- âœ… **ç¼“å­˜å‘½ä¸­**: Redisç¼“å­˜å‘½ä¸­ç‡>90%
- âœ… **æ¶ˆæ¯å¯é **: æ¶ˆæ¯æŠ•é€’æˆåŠŸç‡>99.5%
- âœ… **ç³»ç»Ÿç¨³å®š**: 7x24å°æ—¶ç¨³å®šè¿è¡Œï¼Œå¯ç”¨æ€§>99.9%

---

## ğŸ› ï¸ å®æ–½æ—¶é—´å®‰æ’

### æ€»ä½“æ—¶é—´ï¼š10-12ä¸ªå·¥ä½œæ—¥

**é˜¶æ®µä¸€ (2å¤©)**: æ•°æ®åº“æ¶æ„å‡çº§
- TAlertInfoè¡¨å¢åŠ è‡ªåŠ¨å¤„ç†ç›¸å…³å­—æ®µ
- TAlertRulesè¡¨å¢åŠ è‡ªåŠ¨å¤„ç†é…ç½®å­—æ®µ  
- åˆ›å»ºç›¸å…³ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

**é˜¶æ®µäºŒ (3-4å¤©)**: è‡ªåŠ¨å¤„ç†å¼•æ“å®ç°
- ljwx-bootç«¯å¢å¼ºUnifiedMessagePublisherè‡ªåŠ¨å¤„ç†åŠŸèƒ½
- ljwx-bigscreenç«¯é›†æˆè‡ªåŠ¨å¤„ç†åˆ°upload_health_dataå’Œupload_common_event
- è·¨ç³»ç»ŸRedisé€šä¿¡å’ŒçŠ¶æ€åŒæ­¥

**é˜¶æ®µä¸‰ (2å¤©)**: ç®¡ç†ç•Œé¢å¼€å‘
- ljwx-adminä¸­æ–°å¢å‘Šè­¦è‡ªåŠ¨å¤„ç†è§„åˆ™é…ç½®ç•Œé¢
- æ”¯æŒè§„åˆ™çš„å¢åˆ æ”¹æŸ¥å’Œå¯ç”¨/ç¦ç”¨æ“ä½œ

**é˜¶æ®µå›› (2å¤©)**: ç›‘æ§ä¸ç»Ÿè®¡åŠŸèƒ½
- è‡ªåŠ¨å¤„ç†æ•ˆæœç»Ÿè®¡æŠ¥å‘Š
- å‘Šè­¦å¤„ç†ç›‘æ§ä»ªè¡¨æ¿
- è‡ªåŠ¨å¤„ç†æ—¥å¿—æŸ¥è¯¢åŠŸèƒ½

**é˜¶æ®µäº” (2å¤©)**: æµ‹è¯•éªŒè¯ä¸ä¼˜åŒ–
- åŠŸèƒ½æµ‹è¯•å’Œé›†æˆæµ‹è¯•
- è‡ªåŠ¨å¤„ç†è§„åˆ™éªŒè¯æµ‹è¯•
- æ€§èƒ½æµ‹è¯•å’Œé—®é¢˜ä¿®å¤

**é˜¶æ®µå…­ (1å¤©)**: éƒ¨ç½²ä¸Šçº¿
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- ç³»ç»ŸéªŒæ”¶å’Œæ–‡æ¡£äº¤ä»˜

---

## ğŸ”§ é£é™©æ§åˆ¶ä¸åº”å¯¹

### ä¸»è¦é£é™©
1. **æ•°æ®è¿ç§»é£é™©**: ç°æœ‰å‘Šè­¦æ•°æ®è¿ç§»å¯èƒ½å½±å“ä¸šåŠ¡
2. **æ€§èƒ½å½±å“é£é™©**: AIåˆ†æå¯èƒ½å¢åŠ å¤„ç†æ—¶é—´
3. **ç³»ç»Ÿå…¼å®¹é£é™©**: æ–°åŠŸèƒ½ä¸ç°æœ‰æ¨¡å—é›†æˆé—®é¢˜

### åº”å¯¹ç­–ç•¥
1. **åˆ†é˜¶æ®µå®æ–½**: æ¸è¿›å¼å‘å¸ƒï¼Œæ”¯æŒå›æ»š
2. **A/Bæµ‹è¯•**: æ–°æ—§ç³»ç»Ÿå¹¶è¡ŒéªŒè¯
3. **ç›‘æ§é¢„è­¦**: å®æ—¶æ€§èƒ½ç›‘æ§ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
4. **æ•°æ®å¤‡ä»½**: å®Œæ•´çš„æ•°æ®å¤‡ä»½å’Œæ¢å¤æ–¹æ¡ˆ

---

## ğŸ“ äº¤ä»˜ç‰©æ¸…å•

### ä»£ç äº¤ä»˜ç‰©
1. **ljwx-bootæ¨¡å—å¢å¼º**: æ™ºèƒ½æ¶ˆæ¯å‘å¸ƒå™¨ã€å‘Šè­¦å¼•æ“ã€ç›‘æ§æ¥å£
2. **ljwx-bigscreenæ¨¡å—ä¼˜åŒ–**: AIå‘Šè­¦ç”Ÿæˆã€ç¼“å­˜ç®¡ç†å™¨å¢å¼º
3. **ljwx-adminç•Œé¢**: å‘Šè­¦ç›‘æ§ä»ªè¡¨æ¿ã€ç®¡ç†ç•Œé¢
4. **æ•°æ®åº“è„šæœ¬**: è¡¨ç»“æ„å‡çº§ã€ç´¢å¼•ä¼˜åŒ–ã€æ•°æ®è¿ç§»

### æ–‡æ¡£äº¤ä»˜ç‰©
1. **æŠ€æœ¯è®¾è®¡æ–‡æ¡£**: è¯¦ç»†çš„æ¶æ„è®¾è®¡å’Œå®ç°æ–¹æ¡ˆ
2. **APIæ¥å£æ–‡æ¡£**: æ–°å¢å’Œä¿®æ”¹çš„APIæ¥å£è¯´æ˜
3. **éƒ¨ç½²è¿ç»´æ–‡æ¡£**: éƒ¨ç½²æ­¥éª¤ã€é…ç½®è¯´æ˜ã€ç›‘æ§æŒ‡æ ‡
4. **æµ‹è¯•æŠ¥å‘Š**: åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€å‹åŠ›æµ‹è¯•æŠ¥å‘Š

---

æœ¬æ–¹æ¡ˆåŸºäºç°æœ‰ç³»ç»Ÿæ¶æ„å’Œä»£ç åˆ†æï¼Œæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ã€å¯è½åœ°çš„å‘Šè­¦ç³»ç»Ÿä¼˜åŒ–æ–¹æ¡ˆã€‚é€šè¿‡æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–å’Œå¯è§†åŒ–çš„å…¨é¢æå‡ï¼Œå°†æ˜¾è‘—æ”¹å–„å‘Šè­¦å¤„ç†çš„æ•ˆç‡å’Œè´¨é‡ï¼Œä¸ºå¥åº·ç›‘æŠ¤ä¸šåŠ¡æä¾›å¼ºæœ‰åŠ›çš„æŠ€æœ¯ä¿éšœã€‚

<function_calls>
<invoke name="TodoWrite">
<parameter name="todos">[{"content": "Search and analyze existing alert optimization documentation in docs directory", "status": "completed", "activeForm": "Searching and analyzing existing alert optimization documentation"}, {"content": "Examine current alert implementation in ljwx-boot codebase", "status": "completed", "activeForm": "Examining current alert implementation in ljwx-boot"}, {"content": "Examine current alert implementation in ljwx-bigscreen codebase", "status": "completed", "activeForm": "Examining current alert implementation in ljwx-bigscreen"}, {"content": "Create comprehensive alert optimization implementation plan", "status": "completed", "activeForm": "Creating comprehensive alert optimization implementation plan"}]