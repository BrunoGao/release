<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€§èƒ½æµ‹è¯•æŠ¥å‘Š</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body{font-family:'Microsoft YaHei',sans-serif;margin:0;padding:20px;background:linear-gradient(135deg,#0c1445,#1e3c72,#2a5298);color:#fff;}
        .container{max-width:1400px;margin:0 auto;}
        .header{text-align:center;margin-bottom:30px;padding:20px;background:rgba(255,255,255,0.05);border-radius:15px;}
        .header h1{color:#64ffda;text-shadow:0 0 20px rgba(100,255,218,0.5);margin-bottom:10px;}
        .summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:25px;}
        .card{background:rgba(255,255,255,0.08);border:1px solid rgba(100,255,218,0.2);border-radius:12px;padding:15px;text-align:center;}
        .card h3{color:#64ffda;margin:0 0 8px 0;font-size:1em;}
        .metric{font-size:1.8em;font-weight:bold;color:#fff;}
        .charts{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:25px;}
        .chart-container{background:rgba(255,255,255,0.08);border-radius:12px;padding:15px;height:350px;}
        .chart-title{color:#64ffda;text-align:center;margin-bottom:10px;}
        .table{width:100%;border-collapse:collapse;background:rgba(255,255,255,0.08);border-radius:8px;overflow:hidden;}
        .table th,.table td{padding:6px;text-align:center;border-bottom:1px solid rgba(255,255,255,0.1);font-size:0.85em;}
        .table th{background:rgba(100,255,218,0.2);color:#64ffda;}
        .status-pass{color:#4caf50;}
        .status-fail{color:#f44336;}
        .error-info{background:rgba(255,152,0,0.1);border:1px solid rgba(255,152,0,0.3);border-radius:8px;padding:12px;margin:15px 0;}
        .error-info h4{color:#ff9800;margin:0 0 8px 0;font-size:1.1em;}
        @media(max-width:768px){.charts{grid-template-columns:1fr;}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ å¸¸è§„æ€§èƒ½æµ‹è¯•æŠ¥å‘Š</h1>
            <p>æµ‹è¯•æ—¶é—´: 2025-05-26 14:03:06</p>
        </div>
        
        <div class="summary">
            <div class="card">
                <h3>æœ€é«˜QPS</h3>
                <div class="metric">77</div>
            </div>
            <div class="card">
                <h3>æœ€å¤§å¹¶å‘</h3>
                <div class="metric">1,000</div>
            </div>
            <div class="card">
                <h3>å¹³å‡æˆåŠŸç‡</h3>
                <div class="metric">100.0%</div>
            </div>
            <div class="card">
                <h3>æµ‹è¯•è½®æ¬¡</h3>
                <div class="metric">3</div>
            </div>
        </div>
        
        <div class="error-info">
            <h4>ğŸ” é”™è¯¯ç±»å‹ç»Ÿè®¡</h4>
            <p>æ— é”™è¯¯</p>
            <small>TIMEOUT:è¯·æ±‚è¶…æ—¶ | BROKEN_PIPE:è¿æ¥æ–­å¼€ | CONN_ERROR:è¿æ¥é”™è¯¯ | HTTP_xxx:HTTPçŠ¶æ€ç é”™è¯¯</small>
        </div>
        
        <div class="charts">
            <div class="chart-container">
                <div class="chart-title">QPSæ€§èƒ½æ›²çº¿</div>
                <canvas id="qpsChart"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">å“åº”æ—¶é—´åˆ†æ</div>
                <canvas id="responseChart"></canvas>
            </div>
        </div>
        
        <div class="card">
            <h3>è¯¦ç»†æµ‹è¯•ç»“æœ</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>æµ‹è¯•åç§°</th>
                        <th>è®¾å¤‡æ•°</th>
                        <th>çº¿ç¨‹æ•°</th>
                        <th>è€—æ—¶(s)</th>
                        <th>QPS</th>
                        <th>æˆåŠŸç‡</th>
                        <th>å¹³å‡å“åº”(ms)</th>
                        <th>P95å“åº”(ms)</th>
                        <th>ä¸»è¦é”™è¯¯</th>
                        <th>çŠ¶æ€</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ç¬¬1è½®æµ‹è¯•</td>
                        <td>1,000</td>
                        <td>100</td>
                        <td>13.43</td>
                        <td>74.5</td>
                        <td>100.0%</td>
                        <td>1265</td>
                        <td>1685</td>
                        <td style="font-size:0.8em;">æ— </td>
                        <td class="status-pass">
                            âœ…é€šè¿‡
                        </td>
                    </tr><tr>
                        <td>ç¬¬2è½®æµ‹è¯•</td>
                        <td>1,000</td>
                        <td>100</td>
                        <td>12.92</td>
                        <td>77.4</td>
                        <td>100.0%</td>
                        <td>1249</td>
                        <td>1692</td>
                        <td style="font-size:0.8em;">æ— </td>
                        <td class="status-pass">
                            âœ…é€šè¿‡
                        </td>
                    </tr><tr>
                        <td>ç¬¬3è½®æµ‹è¯•</td>
                        <td>1,000</td>
                        <td>100</td>
                        <td>13.08</td>
                        <td>76.5</td>
                        <td>100.0%</td>
                        <td>1246</td>
                        <td>1683</td>
                        <td style="font-size:0.8em;">æ— </td>
                        <td class="status-pass">
                            âœ…é€šè¿‡
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <script>
        //æ•°æ®å‡†å¤‡å’ŒéªŒè¯
        const testResults=[{"name": "\u7b2c1\u8f6e\u6d4b\u8bd5", "devices": 1000, "workers": 100, "elapsed": 13.428700923919678, "success": 1000, "error": 0, "qps": 74.46736699741109, "success_rate": 100.0, "avg_response": 1265.24063539505, "p95_response": 1685.196876525879, "p99_response": 1861.802101135254, "error_counts": {}, "timestamp": "2025-05-26 14:02:34"}, {"name": "\u7b2c2\u8f6e\u6d4b\u8bd5", "devices": 1000, "workers": 100, "elapsed": 12.916030883789062, "success": 1000, "error": 0, "qps": 77.42316575404772, "success_rate": 100.0, "avg_response": 1249.072301864624, "p95_response": 1692.065954208374, "p99_response": 1929.8267364501953, "error_counts": {}, "timestamp": "2025-05-26 14:02:49"}, {"name": "\u7b2c3\u8f6e\u6d4b\u8bd5", "devices": 1000, "workers": 100, "elapsed": 13.076185703277588, "success": 1000, "error": 0, "qps": 76.47490045582228, "success_rate": 100.0, "avg_response": 1246.10107811292, "p95_response": 1683.4478378295898, "p99_response": 1873.3580112457275, "error_counts": {}, "timestamp": "2025-05-26 14:03:04"}];
        console.log('æµ‹è¯•ç»“æœæ•°æ®:',testResults);
        
        if(testResults && testResults.length>0){
            const qpsData=testResults.map(r=>Math.round(r.qps*10)/10);
            const responseData=testResults.map(r=>[Math.round(r.avg_response),Math.round(r.p95_response),Math.round(r.p99_response||0)]);
            const labels=testResults.map(r=>r.name);
            
            //QPSå›¾è¡¨
            new Chart(document.getElementById('qpsChart'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'QPSæ€§èƒ½',
                        data: qpsData,
                        borderColor: '#64ffda',
                        backgroundColor: 'rgba(100,255,218,0.1)',
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#64ffda',
                        pointBorderColor: '#fff',
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {labels: {color: '#fff',fontSize: 12}},
                        title: {display: true,text: 'QPSæ€§èƒ½è¶‹åŠ¿',color: '#64ffda',fontSize: 14}
                    },
                    scales: {
                        x: {ticks: {color: '#fff',fontSize: 10},grid: {color: 'rgba(255,255,255,0.2)'}},
                        y: {ticks: {color: '#fff',fontSize: 10},grid: {color: 'rgba(255,255,255,0.2)'}}
                    }
                }
            });
            
            //å“åº”æ—¶é—´å›¾è¡¨
            new Chart(document.getElementById('responseChart'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'å¹³å‡å“åº”æ—¶é—´',
                            data: responseData.map(r=>r[0]),
                            backgroundColor: 'rgba(76,175,80,0.8)',
                            borderColor: 'rgba(76,175,80,1)',
                            borderWidth: 1
                        },
                        {
                            label: 'P95å“åº”æ—¶é—´',
                            data: responseData.map(r=>r[1]),
                            backgroundColor: 'rgba(255,193,7,0.8)',
                            borderColor: 'rgba(255,193,7,1)',
                            borderWidth: 1
                        },
                        {
                            label: 'P99å“åº”æ—¶é—´',
                            data: responseData.map(r=>r[2]),
                            backgroundColor: 'rgba(244,67,54,0.8)',
                            borderColor: 'rgba(244,67,54,1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {labels: {color: '#fff',fontSize: 10}},
                        title: {display: true,text: 'å“åº”æ—¶é—´åˆ†å¸ƒ',color: '#64ffda',fontSize: 14}
                    },
                    scales: {
                        x: {ticks: {color: '#fff',fontSize: 9},grid: {color: 'rgba(255,255,255,0.2)'}},
                        y: {ticks: {color: '#fff',fontSize: 9},grid: {color: 'rgba(255,255,255,0.2)'}}
                    }
                }
            });
        }else{
            //æ— æ•°æ®æ—¶æ˜¾ç¤ºæç¤º
            document.getElementById('qpsChart').parentElement.innerHTML='<div style="text-align:center;color:#ff9800;padding:40px;">ğŸ“Š æš‚æ— QPSæ•°æ®</div>';
            document.getElementById('responseChart').parentElement.innerHTML='<div style="text-align:center;color:#ff9800;padding:40px;">ğŸ“ˆ æš‚æ— å“åº”æ—¶é—´æ•°æ®</div>';
        }
    </script>
</body>
</html>