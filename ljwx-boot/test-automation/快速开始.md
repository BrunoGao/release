# ljwx-boot 自动化测试 - 快速开始指南

## 🚀 一键执行

```bash
cd test-automation
./run-tests.sh
```

## 🔐 认证机制说明

**登录接口**: `POST /proxy-default/auth/user_name`
```json
{
  "userName": "admin",
  "password": "80a3d119ee1501354755dfc3c4638d74c67c801689efbed4f25f06cb4b1cd776"
}
```

**Token使用**: 所有后续接口都需要携带登录获取的Token
```
Header: satoken: {Token}
Header: Authorization: Bearer {Token}
```

## 📋 测试覆盖范围

### ✅ Admin用户功能验证
- 登录认证
- 首页数据访问
- 租户管理（跨租户权限）
- 角色和岗位管理（全局权限）
- 用户管理（跨租户用户）
- 设备管理（全租户设备）
- 消息管理（全局消息）
- 告警管理（全局告警）
- 健康信息（跨租户健康数据）
- 健康图标配置（全局配置）

### ✅ 租户管理员功能验证
- 登录认证（租户隔离）
- 首页数据访问（租户范围）
- 租户信息查看（权限限制）
- 角色和岗位管理（租户内权限）
- 用户管理（租户内用户）
- 设备管理（租户内设备）
- 消息管理（租户内消息）
- 告警管理（租户内告警）
- 健康信息（租户内健康数据）
- 健康图标配置（租户级配置）

### ✅ 权限隔离安全验证
- Admin全局数据访问权限
- 租户管理员数据隔离效果
- 跨租户操作拒绝机制
- 角色权限边界验证
- 组织架构权限隔离
- 健康数据访问权限控制
- 权限提升攻击防护

## 🔧 执行选项

```bash
# 完整测试流程（推荐）
./run-tests.sh

# 快速测试（假设服务已启动）
./run-tests.sh quick

# 仅编译测试项目
./run-tests.sh compile

# 清理测试数据
./run-tests.sh clean
```

## 📊 测试报告

测试完成后查看报告：
- **控制台摘要**: 执行完成后直接显示
- **详细报告**: `test-reports/` 目录
- **执行日志**: `test-logs/` 目录

## ⚙️ 环境要求

- **ljwx-boot服务**: 运行在 `http://192.168.1.83:3333`
- **MySQL数据库**: `127.0.0.1:3306/test` (root/123456)
- **Redis缓存**: `127.0.0.1:6379` (密码: 123456)

## 🎯 预期结果

**高性能验证**:
- 组织查询响应时间 < 100ms（闭包表优化）
- 用户查询响应时间 < 200ms（userId优化）

**权限隔离验证**:
- Admin: 可访问所有租户数据 ✅
- 租户管理员: 仅访问本租户数据 ✅
- 跨租户操作: 被正确拒绝 ✅

**功能完整性**:
- 10个Admin功能模块 ✅
- 10个租户管理员功能模块 ✅
- 7个权限安全验证 ✅