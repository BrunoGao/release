server:
  # 服务端口
  port: 9998

# 监控配置 - 专门为Prometheus监控设计
management:
  endpoints:
    web:
      exposure:
        include: "*" # 暴露所有端点
      base-path: /actuator
      cors:
        allowed-origins: "*"
        allowed-methods: "*"
    enabled-by-default: true
  endpoint:
    health:
      show-details: always
      show-components: always
      enabled: true
      probes:
        enabled: true
    metrics:
      enabled: true
    prometheus:
      enabled: true
    info:
      enabled: true

    env:
      enabled: true
    beans:
      enabled: true
  health:
    db:
      enabled: true
    datasource:
      enabled: true
    redis:
      enabled: true
    diskspace:
      enabled: true
  metrics:
    export:
      prometheus:
        enabled: true
        step: 30s # 30秒数据间隔
    tags:
      application: ljwx-boot # 应用标识
      environment: docker # 环境标识
  
spring:
  ai:
    ollama:
      base-url: http://192.168.1.83:11434
      chat:
        enabled: true
        model: deepseek-r1:70b
        options:
          temperature: 0.7
  # Redis 8.x 兼容配置 - 主配置
  data:
    redis:
      url: redis://default:${REDIS_PASSWORD:123456}@${REDIS_HOST:localhost}:${REDIS_PORT:6379}/${REDIS_DB:1}
      connect-timeout: 10000ms
      timeout: 5000ms
      lettuce:
        pool:
          enabled: true
          max-active: 8
          max-idle: 8
          min-idle: 0
        client-options:
          ping-before-activate-connection: false
          auto-reconnect: true
  profiles:
    # 激活环境
    active: ${SPRING_PROFILES_ACTIVE:common}
  application:
    name: ljwx-boot-admin
  main:
    allow-circular-references: true
    allow-bean-definition-overriding: true
  config:
    import:
      - classpath:config/druid.yml
      - classpath:config/mybatis-plus.yml
      - classpath:config/swagger.yml
      # - classpath:config/quartz.yml  # 临时禁用Quartz配置
  task:
    scheduling:
      enabled: true  # 启用定时任务
      pool:
        size: 10  # 定时任务线程池大小

# LJWX 自定义配置
ljwx:
  # Logo上传配置
  logo:
    # 上传文件存储根路径 - 支持环境变量配置
    upload-path: ${LJWX_LOGO_UPLOAD_PATH:uploads}
    # 默认logo文件路径
    default-logo: ${LJWX_DEFAULT_LOGO_PATH:uploads/logos/defaults/default-logo.svg}